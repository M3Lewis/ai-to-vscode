{"version":3,"file":"content.js","mappings":"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","sources":["webpack://ai-to-vscode-bridge/./src/utils/dom.ts","webpack://ai-to-vscode-bridge/./src/content.ts"],"sourcesContent":["import { SiteConfig } from '../types';\r\n\r\nexport class DOMHelper {\r\n  private static readonly DEFAULT_SELECTORS: SiteConfig[] = [\r\n    {\r\n      hostname: 'chat.openai.com',\r\n      copyButtonSelector: 'button[aria-label*=\"Copy\"]',\r\n      responseContainerSelector: '[data-message-author-role=\"assistant\"]',\r\n      name: 'ChatGPT'\r\n    },\r\n    {\r\n      hostname: 'claude.ai',\r\n      copyButtonSelector: 'button[data-testid=\"action-bar-copy\"]',\r\n      responseContainerSelector: undefined,\r\n      name: 'Claude'\r\n    },\r\n    {\r\n      hostname: 'gemini.google.com',\r\n      copyButtonSelector: 'button[aria-label=\"Copy\"]',\r\n      responseContainerSelector: '.model-response',\r\n      name: 'Gemini'\r\n    },\r\n    {\r\n      hostname: 'perplexity.ai',\r\n      copyButtonSelector: 'button[aria-label=\"Copy\"]',\r\n      responseContainerSelector: undefined,\r\n      name: 'Perplexity'\r\n    },\r\n    {\r\n      hostname: 'aistudio.google.com',\r\n      copyButtonSelector: 'button[mat-menu-item][jslog^=\"282205\"]',\r\n      responseContainerSelector: undefined,\r\n      name: 'AI Studio'\r\n    }\r\n  ];\r\n\r\n  public static findLatestCopyButton(): HTMLElement | null {\r\n    const perfStart = performance.now();\r\n    console.group('ğŸ” [æ€§èƒ½ç›‘æ§] æŸ¥æ‰¾COPYæŒ‰é’®');\r\n    \r\n    const currentHostname = window.location.hostname;\r\n    console.log('ğŸ“ å½“å‰åŸŸå:', currentHostname);\r\n    console.log('â±ï¸ å¼€å§‹æ—¶é—´:', new Date().toLocaleTimeString());\r\n\r\n    let result: HTMLElement | null = null;\r\n\r\n    try {\r\n      if (currentHostname.includes('perplexity.ai')) {\r\n        console.log('ğŸ¯ ä½¿ç”¨ Perplexity ä¸“ç”¨æŸ¥æ‰¾');\r\n        result = this.findPerplexityCopyButton();\r\n      } else {\r\n        const defaultConfig = this.DEFAULT_SELECTORS.find(c =>\r\n          currentHostname.includes(c.hostname)\r\n        );\r\n\r\n        if (defaultConfig) {\r\n          console.log('âœ… æ‰¾åˆ°é»˜è®¤é…ç½®:', defaultConfig.name);\r\n          result = this.findButtonWithConfig(defaultConfig);\r\n        } else {\r\n          console.log('âš ï¸ ä½¿ç”¨é€šç”¨ç­–ç•¥æŸ¥æ‰¾');\r\n          result = this.findButtonGeneric();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ æŸ¥æ‰¾æŒ‰é’®æ—¶å‘ç”Ÿé”™è¯¯:', error);\r\n    }\r\n\r\n    const perfEnd = performance.now();\r\n    const timeTaken = (perfEnd - perfStart).toFixed(2);\r\n    \r\n    console.log('â±ï¸ æŸ¥æ‰¾è€—æ—¶:', timeTaken, 'ms');\r\n    console.log('ğŸ“Š ç»“æœ:', result ? 'âœ… æ‰¾åˆ°æŒ‰é’®' : 'âŒ æœªæ‰¾åˆ°æŒ‰é’®');\r\n    console.log('ğŸ’¾ å½“å‰å†…å­˜ä½¿ç”¨:', this.getMemoryUsage());\r\n    console.groupEnd();\r\n\r\n    return result;\r\n  }\r\n\r\n  public static async loadConfigs(): Promise<void> {\r\n    // ç©ºå®ç°ï¼Œä¿ç•™æ¥å£å…¼å®¹æ€§\r\n  }\r\n\r\n  private static findPerplexityCopyButton(): HTMLElement | null {\r\n    const startTime = performance.now();\r\n    console.group('ğŸ” [Perplexity] ä¸“ç”¨æŸ¥æ‰¾');\r\n\r\n    try {\r\n      // æ­¥éª¤1ï¼šæŸ¥æ‰¾å›å¤å®¹å™¨\r\n      console.time('æŸ¥æ‰¾å›å¤å®¹å™¨');\r\n      const replyContainers = document.querySelectorAll(\r\n        'div.py-md.md\\\\:pb-headerHeight.mx-auto.max-w-threadContentWidth > div'\r\n      );\r\n      console.timeEnd('æŸ¥æ‰¾å›å¤å®¹å™¨');\r\n      \r\n      console.log('ğŸ“¦ å›å¤å®¹å™¨æ•°é‡:', replyContainers.length);\r\n      \r\n      if (replyContainers.length === 0) {\r\n        console.warn('âŒ æœªæ‰¾åˆ°å›å¤å®¹å™¨');\r\n        console.groupEnd();\r\n        return null;\r\n      }\r\n\r\n      // æ­¥éª¤2ï¼šè·å–æœ€åä¸€ä¸ªå®¹å™¨\r\n      const lastReply = replyContainers[replyContainers.length - 1];\r\n      console.log('ğŸ“ ä½¿ç”¨æœ€åä¸€ä¸ªå®¹å™¨ (ç´¢å¼•:', replyContainers.length - 1, ')');\r\n\r\n      // æ­¥éª¤3ï¼šæŸ¥æ‰¾å¤åˆ¶æŒ‰é’®\r\n      console.time('æŸ¥æ‰¾å¤åˆ¶æŒ‰é’®');\r\n      const copyBtns = lastReply.querySelectorAll<HTMLElement>(\r\n        'button[aria-label*=\"Copy\"], button[data-testid*=\"copy\"]'\r\n      );\r\n      console.timeEnd('æŸ¥æ‰¾å¤åˆ¶æŒ‰é’®');\r\n      \r\n      console.log('ğŸ”˜ å¤åˆ¶æŒ‰é’®æ•°é‡:', copyBtns.length);\r\n\r\n      if (copyBtns.length > 0) {\r\n        const selectedBtn = copyBtns[copyBtns.length - 1];\r\n        console.log('âœ… é€‰ä¸­æŒ‰é’®:', {\r\n          ariaLabel: selectedBtn.getAttribute('aria-label'),\r\n          dataTestId: selectedBtn.getAttribute('data-testid'),\r\n          text: selectedBtn.textContent?.trim().substring(0, 20)\r\n        });\r\n        console.log('â±ï¸ PerplexityæŸ¥æ‰¾è€—æ—¶:', (performance.now() - startTime).toFixed(2), 'ms');\r\n        console.groupEnd();\r\n        return selectedBtn;\r\n      }\r\n\r\n      // æ­¥éª¤4ï¼šé€’å½’æœç´¢\r\n      console.warn('âš ï¸ æœªæ‰¾åˆ°æ ‡å‡†å¤åˆ¶æŒ‰é’®ï¼Œå°è¯•é€’å½’æœç´¢');\r\n      console.time('é€’å½’æœç´¢æŒ‰é’®');\r\n      const allButtons = Array.from(lastReply.querySelectorAll<HTMLElement>('button'));\r\n      console.log('ğŸ” å®¹å™¨å†…æŒ‰é’®æ€»æ•°:', allButtons.length);\r\n\r\n      for (let i = 0; i < allButtons.length; i++) {\r\n        const button = allButtons[i];\r\n        const ariaLabel = button.getAttribute('aria-label')?.toLowerCase() || '';\r\n        const dataTestId = button.getAttribute('data-testid')?.toLowerCase() || '';\r\n        const text = button.textContent?.toLowerCase() || '';\r\n\r\n        if (ariaLabel.includes('copy') || dataTestId.includes('copy') || text.includes('copy')) {\r\n          console.log('âœ… é€’å½’æ‰¾åˆ°æŒ‰é’® (ç´¢å¼•:', i, ')');\r\n          console.timeEnd('é€’å½’æœç´¢æŒ‰é’®');\r\n          console.groupEnd();\r\n          return button;\r\n        }\r\n      }\r\n      console.timeEnd('é€’å½’æœç´¢æŒ‰é’®');\r\n\r\n    } catch (error) {\r\n      console.error('âŒ PerplexityæŸ¥æ‰¾å‡ºé”™:', error);\r\n    }\r\n\r\n    console.warn('âŒ PerplexityæŸ¥æ‰¾å¤±è´¥');\r\n    console.groupEnd();\r\n    return null;\r\n  }\r\n\r\n  private static findButtonWithConfig(config: SiteConfig): HTMLElement | null {\r\n    const startTime = performance.now();\r\n    console.group('ğŸ” [é…ç½®æŸ¥æ‰¾]', config.name);\r\n    \r\n    const selector = config.copyButtonSelector;\r\n    console.log('ğŸ¯ é€‰æ‹©å™¨:', selector);\r\n\r\n    try {\r\n      // ç‰¹æ®Šå¤„ç†\r\n      if (window.location.hostname.includes('aistudio.google.com')) {\r\n        const result = this.findAIStudioCopyButton();\r\n        console.log('â±ï¸ AI StudioæŸ¥æ‰¾è€—æ—¶:', (performance.now() - startTime).toFixed(2), 'ms');\r\n        console.groupEnd();\r\n        return result;\r\n      }\r\n\r\n      if (window.location.hostname.includes('claude.ai')) {\r\n        const result = this.findClaudeCopyButton();\r\n        console.log('â±ï¸ ClaudeæŸ¥æ‰¾è€—æ—¶:', (performance.now() - startTime).toFixed(2), 'ms');\r\n        console.groupEnd();\r\n        return result;\r\n      }\r\n\r\n      // å®¹å™¨æŸ¥æ‰¾\r\n      if (config.responseContainerSelector) {\r\n        console.log('ğŸ“¦ ä½¿ç”¨å®¹å™¨é€‰æ‹©å™¨:', config.responseContainerSelector);\r\n        console.time('æŸ¥æ‰¾å®¹å™¨');\r\n        const responses = document.querySelectorAll(config.responseContainerSelector);\r\n        console.timeEnd('æŸ¥æ‰¾å®¹å™¨');\r\n        console.log('ğŸ“¦ å®¹å™¨æ•°é‡:', responses.length);\r\n\r\n        if (responses.length > 0) {\r\n          const lastResponse = responses[responses.length - 1];\r\n          console.time('å®¹å™¨å†…æŸ¥æ‰¾æŒ‰é’®');\r\n          const button = lastResponse.querySelector<HTMLElement>(selector);\r\n          console.timeEnd('å®¹å™¨å†…æŸ¥æ‰¾æŒ‰é’®');\r\n          \r\n          if (button) {\r\n            console.log('âœ… åœ¨å®¹å™¨ä¸­æ‰¾åˆ°æŒ‰é’®');\r\n            console.groupEnd();\r\n            return button;\r\n          }\r\n        }\r\n      }\r\n\r\n      // å…¨å±€æŸ¥æ‰¾\r\n      console.warn('âš ï¸ å›é€€åˆ°å…¨å±€æŸ¥æ‰¾');\r\n      console.time('å…¨å±€æŸ¥æ‰¾æŒ‰é’®');\r\n      const buttons = document.querySelectorAll<HTMLElement>(selector);\r\n      console.timeEnd('å…¨å±€æŸ¥æ‰¾æŒ‰é’®');\r\n      console.log('ğŸ”˜ å…¨å±€æ‰¾åˆ°æŒ‰é’®æ•°:', buttons.length);\r\n\r\n      if (buttons.length > 0) {\r\n        console.log('âœ… è¿”å›æœ€åä¸€ä¸ªæŒ‰é’®');\r\n        console.groupEnd();\r\n        return buttons[buttons.length - 1];\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('âŒ é…ç½®æŸ¥æ‰¾å‡ºé”™:', error);\r\n    }\r\n\r\n    console.warn('âŒ æœªæ‰¾åˆ°æŒ‰é’®');\r\n    console.log('â±ï¸ æ€»è€—æ—¶:', (performance.now() - startTime).toFixed(2), 'ms');\r\n    console.groupEnd();\r\n    return null;\r\n  }\r\n\r\n  private static findClaudeCopyButton(): HTMLElement | null {\r\n    console.group('ğŸ” [Claude] ä¸“ç”¨æŸ¥æ‰¾');\r\n    \r\n    try {\r\n      console.time('æŸ¥æ‰¾ClaudeæŒ‰é’®');\r\n      const buttons = Array.from(document.querySelectorAll<HTMLElement>('button[data-testid=\"action-bar-copy\"]'));\r\n      console.timeEnd('æŸ¥æ‰¾ClaudeæŒ‰é’®');\r\n      console.log('ğŸ”˜ æ‰¾åˆ°æŒ‰é’®æ•°:', buttons.length);\r\n\r\n      if (buttons.length > 0) {\r\n        console.groupEnd();\r\n        return buttons[buttons.length - 1];\r\n      }\r\n\r\n      console.warn('âš ï¸ ä½¿ç”¨SVGå¤‡ç”¨æŸ¥æ‰¾');\r\n      console.time('SVGè·¯å¾„æŸ¥æ‰¾');\r\n      const allButtons = Array.from(document.querySelectorAll<HTMLElement>('button'));\r\n      console.log('ğŸ” é¡µé¢æŒ‰é’®æ€»æ•°:', allButtons.length);\r\n      \r\n      if (allButtons.length > 1000) {\r\n        console.error('âŒ æŒ‰é’®æ•°é‡å¼‚å¸¸ (>1000)ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼');\r\n      }\r\n\r\n      for (let i = allButtons.length - 1; i >= 0; i--) {\r\n        const btn = allButtons[i];\r\n        const svg = btn.querySelector('svg');\r\n        if (svg) {\r\n          const path = svg.querySelector('path');\r\n          if (path) {\r\n            const d = path.getAttribute('d') || '';\r\n            if (d.includes('M10 1.5C11.1097') || d.includes('clipboard')) {\r\n              console.log('âœ… é€šè¿‡SVGæ‰¾åˆ° (ç´¢å¼•:', i, ')');\r\n              console.timeEnd('SVGè·¯å¾„æŸ¥æ‰¾');\r\n              console.groupEnd();\r\n              return btn;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      console.timeEnd('SVGè·¯å¾„æŸ¥æ‰¾');\r\n\r\n    } catch (error) {\r\n      console.error('âŒ ClaudeæŸ¥æ‰¾å‡ºé”™:', error);\r\n    }\r\n\r\n    console.groupEnd();\r\n    return null;\r\n  }\r\n\r\n  private static findAIStudioCopyButton(): HTMLElement | null {\r\n    console.group('ğŸ” [AI Studio] ä¸“ç”¨æŸ¥æ‰¾');\r\n    \r\n    try {\r\n      const strategies = [\r\n        { name: 'jslogå±æ€§', fn: () => document.querySelector<HTMLElement>('button[mat-menu-item][jslog^=\"282205\"]') },\r\n        { name: 'copy-markdown-buttonç±»', fn: () => {\r\n          const icon = document.querySelector<HTMLElement>('.copy-markdown-button');\r\n          return icon?.closest('button[mat-menu-item]') as HTMLElement;\r\n        }},\r\n        { name: 'Copy as markdownæ–‡æœ¬', fn: () => {\r\n          const items = Array.from(document.querySelectorAll<HTMLElement>('button[mat-menu-item]'));\r\n          return items.find(item => item.textContent?.toLowerCase().includes('copy as markdown')) || null;\r\n        }}\r\n      ];\r\n\r\n      for (const strategy of strategies) {\r\n        console.time(strategy.name);\r\n        const result = strategy.fn();\r\n        console.timeEnd(strategy.name);\r\n        \r\n        if (result) {\r\n          console.log('âœ… ç­–ç•¥æˆåŠŸ:', strategy.name);\r\n          console.groupEnd();\r\n          return result;\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('âŒ AI StudioæŸ¥æ‰¾å‡ºé”™:', error);\r\n    }\r\n\r\n    console.groupEnd();\r\n    return null;\r\n  }\r\n\r\n  private static findButtonGeneric(): HTMLElement | null {\r\n    console.group('ğŸ” [é€šç”¨ç­–ç•¥] æŸ¥æ‰¾');\r\n    \r\n    const selectors = [\r\n      'button[data-testid*=\"copy\"]',\r\n      'button[aria-label*=\"Copy\" i]',\r\n      'button[aria-label*=\"å¤åˆ¶\" i]',\r\n      'button[title*=\"Copy\" i]',\r\n      'button.copy-button',\r\n      'button.copy-btn',\r\n      '[data-testid*=\"copy\"]'\r\n    ];\r\n\r\n    for (const selector of selectors) {\r\n      try {\r\n        console.time(`é€‰æ‹©å™¨: ${selector}`);\r\n        const buttons = document.querySelectorAll<HTMLElement>(selector);\r\n        console.timeEnd(`é€‰æ‹©å™¨: ${selector}`);\r\n        console.log(`  ğŸ“Š æ‰¾åˆ° ${buttons.length} ä¸ªæŒ‰é’®`);\r\n\r\n        if (buttons.length > 100) {\r\n          console.warn(`  âš ï¸ æŒ‰é’®æ•°é‡è¿‡å¤š (${buttons.length})ï¼Œå¯èƒ½å½±å“æ€§èƒ½ï¼`);\r\n        }\r\n\r\n        if (buttons.length > 0) {\r\n          console.log('  âœ… è¿”å›æœ€åä¸€ä¸ªæŒ‰é’®');\r\n          console.groupEnd();\r\n          return buttons[buttons.length - 1];\r\n        }\r\n      } catch (e) {\r\n        console.error(`  âŒ é€‰æ‹©å™¨é”™è¯¯:`, e);\r\n        continue;\r\n      }\r\n    }\r\n\r\n    console.error('âŒ æ‰€æœ‰é€šç”¨ç­–ç•¥éƒ½å¤±è´¥äº†');\r\n    console.groupEnd();\r\n    return null;\r\n  }\r\n\r\n  public static async getClipboardContent(): Promise<string> {\r\n    const startTime = performance.now();\r\n    console.group('ğŸ“‹ [å‰ªè´´æ¿] è¯»å–å†…å®¹');\r\n    \r\n    try {\r\n      const content = await navigator.clipboard.readText();\r\n      const timeTaken = (performance.now() - startTime).toFixed(2);\r\n      \r\n      console.log('âœ… è¯»å–æˆåŠŸ');\r\n      console.log('ğŸ“ å†…å®¹é•¿åº¦:', content.length, 'å­—ç¬¦');\r\n      console.log('â±ï¸ è¯»å–è€—æ—¶:', timeTaken, 'ms');\r\n      \r\n      if (content.length > 50000) {\r\n        console.warn('âš ï¸ å†…å®¹è¿‡å¤§ (>50KB)ï¼Œå¯èƒ½å½±å“æ€§èƒ½ï¼');\r\n      }\r\n      \r\n      console.groupEnd();\r\n      return content;\r\n    } catch (error) {\r\n      console.error('âŒ è¯»å–å¤±è´¥:', error);\r\n      console.groupEnd();\r\n      throw new Error('æ— æ³•è¯»å–å‰ªè´´æ¿');\r\n    }\r\n  }\r\n\r\n  private static getMemoryUsage(): string {\r\n    if ('memory' in performance) {\r\n      const memory = (performance as any).memory;\r\n      const used = (memory.usedJSHeapSize / 1048576).toFixed(2);\r\n      const total = (memory.totalJSHeapSize / 1048576).toFixed(2);\r\n      return `${used} MB / ${total} MB`;\r\n    }\r\n    return 'ä¸å¯ç”¨';\r\n  }\r\n\r\n  public static makeDraggable(element: HTMLElement): void {\r\n    let isDragging = false;\r\n    let currentX: number;\r\n    let currentY: number;\r\n    let initialX: number;\r\n    let initialY: number;\r\n\r\n    const header = element.querySelector<HTMLElement>('.panel-header');\r\n    if (!header) return;\r\n\r\n    header.style.cursor = 'move';\r\n\r\n    header.addEventListener('mousedown', (e: MouseEvent) => {\r\n      if ((e.target as HTMLElement).classList.contains('close-btn')) {\r\n        return;\r\n      }\r\n\r\n      isDragging = true;\r\n      initialX = e.clientX - element.offsetLeft;\r\n      initialY = e.clientY - element.offsetTop;\r\n    });\r\n\r\n    document.addEventListener('mousemove', (e: MouseEvent) => {\r\n      if (!isDragging) return;\r\n\r\n      e.preventDefault();\r\n      currentX = e.clientX - initialX;\r\n      currentY = e.clientY - initialY;\r\n\r\n      element.style.left = `${currentX}px`;\r\n      element.style.top = `${currentY}px`;\r\n      element.style.right = 'auto';\r\n      element.style.bottom = 'auto';\r\n    });\r\n\r\n    document.addEventListener('mouseup', () => {\r\n      isDragging = false;\r\n    });\r\n  }\r\n}\r\n","import { DOMHelper } from './utils/dom';\r\nimport { MessageToVSCode, MessageResponse, ConnectionStatus } from './types';\r\n\r\nclass FloatingPanel {\r\n  private panel: HTMLElement | null = null;\r\n  private statusElement: HTMLElement | null = null;\r\n  private enabled: boolean = false;\r\n  private dailyCounter: number = 1;\r\n  private promptButtons: HTMLElement | null = null;\r\n  private isDebugMode: boolean = false;\r\n\r\n  constructor() {\r\n    this.initialize();\r\n    this.checkDebugMode();\r\n  }\r\n\r\n  private checkDebugMode(): void {\r\n    // æ£€æµ‹æ˜¯å¦ä¸ºè°ƒè¯•æ¨¡å¼ï¼ˆå¯ä»¥é€šè¿‡URLå‚æ•°æˆ–localStorageæ§åˆ¶ï¼‰\r\n    this.isDebugMode = \r\n      window.location.search.includes('debug=true') ||\r\n      localStorage.getItem('ai-vscode-debug') === 'true' ||\r\n      window.location.hostname === 'localhost';\r\n  }\r\n\r\n  private debugLog(message: string, ...args: any[]): void {\r\n    if (this.isDebugMode) {\r\n      console.log(message, ...args);\r\n    }\r\n  }\r\n\r\n  private debugWarn(message: string, ...args: any[]): void {\r\n    if (this.isDebugMode) {\r\n      console.warn(message, ...args);\r\n    }\r\n  }\r\n\r\n  private async initialize(): Promise<void> {\r\n    await this.checkAndInitialize();\r\n    await this.loadDailyCounter();\r\n\r\n    // æ–°å¢ï¼šåˆå§‹åŒ–åç«‹å³æŸ¥è¯¢è¿æ¥çŠ¶æ€\r\n    this.queryConnectionStatus();\r\n  }\r\n\r\n  // æ–°å¢ï¼šä¸»åŠ¨æŸ¥è¯¢è¿æ¥çŠ¶æ€\r\n  private queryConnectionStatus(): void {\r\n    chrome.runtime.sendMessage({ action: 'getConnectionStatus' }, (response) => {\r\n      if (chrome.runtime.lastError) {\r\n        console.error('æŸ¥è¯¢è¿æ¥çŠ¶æ€å¤±è´¥:', chrome.runtime.lastError);\r\n        return;\r\n      }\r\n      \r\n      if (response && response.connected !== undefined) {\r\n        console.log('å½“å‰è¿æ¥çŠ¶æ€:', response.connected ? 'å·²è¿æ¥' : 'æœªè¿æ¥');\r\n        this.updateConnectionStatus(response.connected);\r\n      }\r\n    });\r\n  }\r\n\r\n  private async loadDailyCounter(): Promise<void> {\r\n    const today = new Date().toDateString();\r\n    const result = await chrome.storage.local.get(['lastSaveDate', 'dailyCounter']);\r\n    \r\n    if (result.lastSaveDate === today) {\r\n      this.dailyCounter = (result.dailyCounter || 0) + 1;\r\n    } else {\r\n      this.dailyCounter = 1;\r\n    }\r\n  }\r\n\r\n  private async updateDailyCounter(): Promise<void> {\r\n    const today = new Date().toDateString();\r\n    await chrome.storage.local.set({\r\n      lastSaveDate: today,\r\n      dailyCounter: this.dailyCounter\r\n    });\r\n    this.dailyCounter++;\r\n  }\r\n\r\n  private async checkAndInitialize(): Promise<void> {\r\n    const result = await chrome.storage.sync.get({\r\n      enabledUrls: [\r\n        'chat.openai.com',\r\n        'claude.ai',\r\n        'gemini.google.com',\r\n        'perplexity.ai'\r\n      ],\r\n      showOnAllSites: false\r\n    });\r\n\r\n    const currentHostname = window.location.hostname;\r\n    const showOnAllSites = result.showOnAllSites;\r\n    const enabledUrls: string[] = result.enabledUrls;\r\n\r\n    if (showOnAllSites || this.isUrlEnabled(currentHostname, enabledUrls)) {\r\n      this.enabled = true;\r\n      this.createPanel();\r\n      this.setupMessageListener();\r\n      console.log('âœ… æ‚¬æµ®çª—å·²å¯ç”¨');\r\n    } else {\r\n      console.log('å½“å‰ç½‘ç«™æœªå¯ç”¨æ‚¬æµ®çª—:', currentHostname);\r\n    }\r\n\r\n    chrome.storage.onChanged.addListener((changes) => {\r\n      if (changes.enabledUrls || changes.showOnAllSites || changes.siteConfigs) {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  private isUrlEnabled(hostname: string, enabledUrls: string[]): boolean {\r\n    return enabledUrls.some(url => {\r\n      if (url.includes('*')) {\r\n        const pattern = url.replace(/\\*/g, '.*');\r\n        return new RegExp(pattern).test(hostname);\r\n      }\r\n      return hostname.includes(url);\r\n    });\r\n  }\r\n\r\nprivate createPanel(): void {\r\n  this.panel = document.createElement('div');\r\n  this.panel.id = 'ai-vscode-panel';\r\n\r\n  this.panel.innerHTML = `\r\n    <div class=\"panel-container\">\r\n      <div class=\"ai-vscode-header\">\r\n        <span class=\"ai-vscode-title\">å‘é€åˆ°VS Code</span>\r\n        <button id=\"toggle-prompts\" class=\"ai-vscode-toggle\" title=\"æŠ˜å /å±•å¼€æç¤ºè¯\">â–¾</button>\r\n        <button id=\"close-panel\" class=\"ai-vscode-close\">âœ•</button>\r\n      </div>\r\n      <div id=\"filename-preview\" class=\"filename-preview\">æ–‡ä»¶åé¢„è§ˆ...</div>\r\n\r\n      <div id=\"prompt-section\">\r\n        <div class=\"prompt-section-header\">\r\n          <span>å¸¸ç”¨æç¤ºè¯</span>\r\n        </div>\r\n        <div id=\"prompt-buttons\" class=\"prompt-buttons\"></div>\r\n      </div>\r\n\r\n      <div class=\"ai-vscode-footer\">\r\n        <button id=\"send-to-vscode\" class=\"primary\">å¤åˆ¶å¹¶ä¿å­˜</button>\r\n        <div id=\"connection-status\" class=\"connection-status\">\r\n          <span class=\"status-dot\"></span>\r\n          <span class=\"status-text\">æœªè¿æ¥</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  document.body.appendChild(this.panel);\r\n  DOMHelper.makeDraggable(this.panel);\r\n\r\n  const sendButton = document.getElementById('send-to-vscode');\r\n  sendButton?.addEventListener('click', () => this.handleSendClick());\r\n\r\n  const closeButton = document.getElementById('close-panel');\r\n  closeButton?.addEventListener('click', () => this.togglePanel());\r\n\r\n  // æŠ˜å æŒ‰é’®é€»è¾‘\r\n  const toggleBtn = document.getElementById('toggle-prompts') as HTMLButtonElement | null;\r\n  const promptSection = document.getElementById('prompt-section');\r\n\r\n  if (toggleBtn && promptSection) {\r\n    toggleBtn.addEventListener('click', () => {\r\n      const collapsed = promptSection.classList.toggle('collapsed');\r\n      toggleBtn.textContent = collapsed ? 'â–¸' : 'â–¾';\r\n\r\n      // å¦‚éœ€è®°ä½ç”¨æˆ·é€‰æ‹©ï¼Œå¯ä»¥å†™å…¥ local\r\n      chrome.storage.local.set({ promptsCollapsed: collapsed });\r\n    });\r\n\r\n    // åˆå§‹åŒ–æ—¶è¯»å–æŠ˜å çŠ¶æ€\r\n    chrome.storage.local.get('promptsCollapsed', (res) => {\r\n      if (res.promptsCollapsed) {\r\n        promptSection.classList.add('collapsed');\r\n        toggleBtn.textContent = 'â–¸';\r\n      }\r\n    });\r\n  }\r\n\r\n  this.statusElement = document.getElementById('connection-status');\r\n  this.promptButtons = document.getElementById('prompt-buttons');\r\n\r\n  // åŠ è½½æç¤ºè¯æŒ‰é’®\r\n  this.loadPromptButtons();\r\n}\r\n\r\n\r\n\r\n  private togglePanel(): void {\r\n    if (this.panel) {\r\n      this.panel.style.display = \r\n        this.panel.style.display === 'none' ? 'block' : 'none';\r\n    }\r\n  }\r\n\r\nprivate async handleSendClick(): Promise<void> {\r\n  const overallStart = performance.now();\r\n  console.group('ğŸš€ [å¤åˆ¶å¹¶ä¿å­˜] å®Œæ•´æµç¨‹');\r\n  console.log('â±ï¸ å¼€å§‹æ—¶é—´:', new Date().toLocaleTimeString());\r\n  console.log('ğŸ’¾ åˆå§‹å†…å­˜:', this.getMemoryUsage());\r\n\r\n  try {\r\n    // AI Studio ç‰¹æ®Šå¤„ç†\r\n    if (window.location.hostname.includes('aistudio.google.com')) {\r\n      await this.handleAIStudioCopy();\r\n      console.groupEnd();\r\n      return;\r\n    }\r\n\r\n    // æ­¥éª¤1ï¼šæŸ¥æ‰¾æŒ‰é’®\r\n    console.log('\\nğŸ“ æ­¥éª¤1: æŸ¥æ‰¾å¤åˆ¶æŒ‰é’®');\r\n    const copyButton = DOMHelper.findLatestCopyButton();\r\n    \r\n    if (!copyButton) {\r\n      console.error('âŒ æœªæ‰¾åˆ°COPYæŒ‰é’®');\r\n      this.showError('æœªæ‰¾åˆ°COPYæŒ‰é’®');\r\n      console.groupEnd();\r\n      return;\r\n    }\r\n\r\n    // æ­¥éª¤2ï¼šç‚¹å‡»æŒ‰é’®\r\n    console.log('\\nğŸ“ æ­¥éª¤2: ç‚¹å‡»å¤åˆ¶æŒ‰é’®');\r\n    console.time('ç‚¹å‡»å¤åˆ¶');\r\n    copyButton.click();\r\n    console.timeEnd('ç‚¹å‡»å¤åˆ¶');\r\n\r\n    // æ­¥éª¤3ï¼šç­‰å¾…å¤åˆ¶å®Œæˆ\r\n    console.log('\\nğŸ“ æ­¥éª¤3: ç­‰å¾…å¤åˆ¶å®Œæˆ (300ms)');\r\n    await this.delay(300);\r\n\r\n    // æ­¥éª¤4ï¼šè¯»å–å‰ªè´´æ¿\r\n    console.log('\\nğŸ“ æ­¥éª¤4: è¯»å–å‰ªè´´æ¿');\r\n    const content = await DOMHelper.getClipboardContent();\r\n    \r\n    if (!content || content.trim().length === 0) {\r\n      console.error('âŒ å‰ªè´´æ¿å†…å®¹ä¸ºç©º');\r\n      this.showError('å‰ªè´´æ¿å†…å®¹ä¸ºç©º');\r\n      console.groupEnd();\r\n      return;\r\n    }\r\n\r\n    // æ­¥éª¤5ï¼šç”Ÿæˆæ–‡ä»¶å\r\n    console.log('\\nğŸ“ æ­¥éª¤5: ç”Ÿæˆæ–‡ä»¶å');\r\n    console.time('ç”Ÿæˆæ–‡ä»¶å');\r\n    const filename = this.generateSmartFilename(content);\r\n    console.timeEnd('ç”Ÿæˆæ–‡ä»¶å');\r\n    console.log('ğŸ“ æ–‡ä»¶å:', filename);\r\n\r\n    // æ­¥éª¤6ï¼šå‘é€åˆ°VS Code\r\n    console.log('\\nğŸ“ æ­¥éª¤6: å‘é€åˆ°VS Code');\r\n    this.showFilenamePreview(filename);\r\n    this.sendToVSCode(content, filename);\r\n    \r\n    // æ­¥éª¤7ï¼šæ›´æ–°è®¡æ•°å™¨\r\n    console.log('\\nğŸ“ æ­¥éª¤7: æ›´æ–°è®¡æ•°å™¨');\r\n    await this.updateDailyCounter();\r\n\r\n    const overallEnd = performance.now();\r\n    console.log('\\nâœ… æµç¨‹å®Œæˆ');\r\n    console.log('â±ï¸ æ€»è€—æ—¶:', (overallEnd - overallStart).toFixed(2), 'ms');\r\n    console.log('ğŸ’¾ ç»“æŸå†…å­˜:', this.getMemoryUsage());\r\n    console.groupEnd();\r\n\r\n  } catch (error) {\r\n    const errorMessage = error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯';\r\n    console.error('âŒ æµç¨‹å¤±è´¥:', error);\r\n    console.log('ğŸ’¾ é”™è¯¯æ—¶å†…å­˜:', this.getMemoryUsage());\r\n    this.showError(`æ“ä½œå¤±è´¥ï¼š${errorMessage}`);\r\n    console.groupEnd();\r\n  }\r\n}\r\n\r\nprivate getMemoryUsage(): string {\r\n  if ('memory' in performance) {\r\n    const memory = (performance as any).memory;\r\n    const used = (memory.usedJSHeapSize / 1048576).toFixed(2);\r\n    return `${used} MB`;\r\n  }\r\n  return 'ä¸å¯ç”¨';\r\n}\r\n\r\n\r\n// æ–°å¢ï¼šä¸“é—¨å¤„ç† AI Studio çš„å¤åˆ¶\r\nprivate async handleAIStudioCopy(): Promise<void> {\r\n  try {\r\n    this.debugLog('ğŸ” AI Studio ç‰¹æ®Šå¤„ç†ï¼šæŸ¥æ‰¾èœå•æŒ‰é’®');\r\n    \r\n    // 1. æŸ¥æ‰¾æ‰€æœ‰çš„ more_vert æŒ‰é’®\r\n    const moreButtons = Array.from(document.querySelectorAll<HTMLElement>(\r\n  'button[aria-label*=\"options\"], ' +\r\n  'button[iconname=\"more_vert\"], ' +\r\n  'button[aria-label*=\"Open options\"], ' +\r\n  'ms-chat-turn-options button'\r\n));\r\n    \r\n    if (moreButtons.length === 0) {\r\n      this.showError('æœªæ‰¾åˆ°èœå•æŒ‰é’®');\r\n      return;\r\n    }\r\n    \r\n    // è·å–æœ€åä¸€ä¸ªï¼ˆæœ€æ–°çš„å›ç­”ï¼‰\r\n    const menuButton = moreButtons[moreButtons.length - 1];\r\n    this.debugLog('âœ… æ‰¾åˆ°èœå•æŒ‰é’®ï¼Œå‡†å¤‡ç‚¹å‡»');\r\n    \r\n    // 2. ç‚¹å‡»èœå•æŒ‰é’®å±•å¼€èœå•\r\n    menuButton.click();\r\n    this.debugLog('âœ… èœå•å·²å±•å¼€ï¼Œç­‰å¾…åŠ è½½...');\r\n    \r\n    // 3. ç­‰å¾…èœå•å±•å¼€\r\n    await this.delay(500);\r\n    \r\n    // 4. æŸ¥æ‰¾å¤åˆ¶æŒ‰é’®\r\n    const copyButton = DOMHelper.findLatestCopyButton();\r\n    \r\n    if (!copyButton) {\r\n      console.error('âŒ èœå•å±•å¼€åä»æœªæ‰¾åˆ°å¤åˆ¶æŒ‰é’®');\r\n      this.showError('æœªæ‰¾åˆ°å¤åˆ¶æŒ‰é’®');\r\n      // å…³é—­èœå•\r\n      menuButton.click();\r\n      return;\r\n    }\r\n    \r\n    this.debugLog('âœ… æ‰¾åˆ°å¤åˆ¶æŒ‰é’®ï¼Œå‡†å¤‡ç‚¹å‡»');\r\n    \r\n    // 5. ç‚¹å‡»å¤åˆ¶æŒ‰é’®\r\n    copyButton.click();\r\n    \r\n    // 6. ç­‰å¾…å¤åˆ¶å®Œæˆ\r\n    await this.delay(300);\r\n    \r\n    // 7. è¯»å–å‰ªè´´æ¿å†…å®¹\r\n    const content = await DOMHelper.getClipboardContent();\r\n    \r\n    if (!content || content.trim().length === 0) {\r\n      this.showError('å‰ªè´´æ¿å†…å®¹ä¸ºç©º');\r\n      return;\r\n    }\r\n\r\n    this.debugLog('âœ… è¯»å–åˆ°å†…å®¹ï¼Œé•¿åº¦:', content.length);\r\n    \r\n    // å†…å®¹é•¿åº¦é™åˆ¶æ£€æŸ¥\r\n    if (content.length > 50000) { // 50KBé™åˆ¶\r\n      this.showError('å¯¹è¯å†…å®¹è¿‡é•¿ï¼Œæ— æ³•ç›´æ¥å¤åˆ¶ï¼Œè¯·åˆ†æ‰¹æ“ä½œï¼');\r\n      return;\r\n    }\r\n    \r\n    // 8. ç”Ÿæˆæ–‡ä»¶åå¹¶ä¿å­˜\r\n    const filename = this.generateSmartFilename(content);\r\n    this.debugLog('ğŸ“ ç”Ÿæˆæ–‡ä»¶å:', filename);\r\n    \r\n    this.showFilenamePreview(filename);\r\n    this.sendToVSCode(content, filename);\r\n    await this.updateDailyCounter();\r\n    \r\n  } catch (error) {\r\n    const errorMessage = error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯';\r\n    console.error('AI Studio å¤åˆ¶å¤±è´¥:', error);\r\n    this.showError(`æ“ä½œå¤±è´¥ï¼š${errorMessage}`);\r\n  }\r\n}\r\n\r\n\r\n  private generateSmartFilename(content: string): string {\r\n    const now = new Date();\r\n    \r\n    // æ ¼å¼åŒ–æ—¥æœŸ: YYYYMMDD\r\n    const date = now.getFullYear() + \r\n                 String(now.getMonth() + 1).padStart(2, '0') + \r\n                 String(now.getDate()).padStart(2, '0');\r\n    \r\n    // æ ¼å¼åŒ–æ—¶é—´: HHmmss\r\n    const time = String(now.getHours()).padStart(2, '0') + \r\n                 String(now.getMinutes()).padStart(2, '0') + \r\n                 String(now.getSeconds()).padStart(2, '0');\r\n    \r\n    // åºå·: 001, 002, 003...\r\n    const sequence = String(this.dailyCounter).padStart(3, '0');\r\n    \r\n    // æå–ç¬¬ä¸€å¥è¯\r\n    const firstSentence = this.extractFirstSentence(content);\r\n    \r\n    // æ¸…ç†ç¬¬ä¸€å¥è¯\r\n    const cleanedSentence = this.cleanSentence(firstSentence);\r\n    \r\n    // é™åˆ¶é•¿åº¦ï¼ˆé˜²æ­¢æ–‡ä»¶åè¿‡é•¿ï¼‰\r\n    const shortSentence = this.truncateFilename(cleanedSentence, 50);\r\n    \r\n    // ç»„åˆæ–‡ä»¶å\r\n    return `${date}-${time}-${sequence}-${shortSentence}.md`;\r\n  }\r\n\r\n  private extractFirstSentence(content: string): string {\r\n    // ç§»é™¤Markdownæ ‡è®°\r\n    let text = content.trim();\r\n    text = text.replace(/^#+\\s+/gm, ''); // ç§»é™¤æ ‡é¢˜ç¬¦å·\r\n    text = text.replace(/\\*\\*(.+?)\\*\\*/g, '$1'); // ç§»é™¤åŠ ç²—\r\n    text = text.replace(/\\*(.+?)\\*/g, '$1'); // ç§»é™¤æ–œä½“\r\n    text = text.replace(/`(.+?)`/g, '$1'); // ç§»é™¤ä»£ç æ ‡è®°\r\n    text = text.replace(/\\[(.+?)\\]\\(.+?\\)/g, '$1'); // ç§»é™¤é“¾æ¥ï¼Œä¿ç•™æ–‡æœ¬\r\n    \r\n    // åˆ†å‰²æˆå¥å­ï¼ˆæŒ‰å¥å·ã€é—®å·ã€æ„Ÿå¹å·ã€æ¢è¡Œï¼‰\r\n    const sentences = text.split(/[ã€‚.!?ï¼ï¼Ÿ\\n]/);\r\n    \r\n    // æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰å®é™…å†…å®¹çš„å¥å­\r\n    for (const sentence of sentences) {\r\n      const cleaned = sentence.trim();\r\n      if (cleaned.length > 5) { // è‡³å°‘5ä¸ªå­—ç¬¦\r\n        return cleaned;\r\n      }\r\n    }\r\n    \r\n    // å¦‚æœæ²¡æ‰¾åˆ°åˆé€‚çš„å¥å­ï¼Œå–å‰50ä¸ªå­—ç¬¦\r\n    return text.substring(0, 50).trim();\r\n  }\r\n\r\n  private cleanSentence(sentence: string): string {\r\n    // ç§»é™¤å¸¸è§çš„å¼€åœºç™½\r\n    const removePatterns = [\r\n      /^å¥½çš„[ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^å½“ç„¶[ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^æˆ‘ä¼š[^\\s]{0,5}/i,\r\n      /^æˆ‘å°†[^\\s]{0,5}/i,\r\n      /^è®©æˆ‘[^\\s]{0,5}/i,\r\n      /^æ˜ç™½[äº†å—]?[ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^æ”¶åˆ°[ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^å¥½[çš„å•¦][ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^OK[ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^äº†è§£[ï¼!ï¼Œ,ã€‚.\\s]*/i,\r\n      /^æ²¡é—®é¢˜[ï¼!ï¼Œ,ã€‚.\\s]*/i\r\n    ];\r\n    \r\n    let cleaned = sentence;\r\n    for (const pattern of removePatterns) {\r\n      cleaned = cleaned.replace(pattern, '');\r\n    }\r\n    \r\n    // ç§»é™¤ç‰¹æ®Šå­—ç¬¦å’Œç©ºæ ¼ï¼ˆæ–‡ä»¶åä¸å…è®¸çš„å­—ç¬¦ï¼‰\r\n    cleaned = cleaned.replace(/[<>:\"/\\\\|?*\\x00-\\x1F]/g, '');\r\n    \r\n    // ç§»é™¤å¤šä½™ç©ºæ ¼\r\n    cleaned = cleaned.replace(/\\s+/g, '-');\r\n    \r\n    // ç§»é™¤å¼€å¤´å’Œç»“å°¾çš„è¿å­—ç¬¦\r\n    cleaned = cleaned.replace(/^-+|-+$/g, '');\r\n    \r\n    return cleaned;\r\n  }\r\n\r\n  private truncateFilename(text: string, maxLength: number): string {\r\n    if (text.length <= maxLength) {\r\n      return text;\r\n    }\r\n    \r\n    // åœ¨maxLengthå¤„æˆªæ–­ï¼Œä½†å°è¯•åœ¨åˆé€‚çš„ä½ç½®ï¼ˆå¦‚è¿å­—ç¬¦å¤„ï¼‰\r\n    let truncated = text.substring(0, maxLength);\r\n    const lastDash = truncated.lastIndexOf('-');\r\n    \r\n    if (lastDash > maxLength * 0.7) {\r\n      // å¦‚æœåœ¨å70%æœ‰è¿å­—ç¬¦ï¼Œåœ¨é‚£é‡Œæˆªæ–­\r\n      truncated = truncated.substring(0, lastDash);\r\n    }\r\n    \r\n    return truncated;\r\n  }\r\n\r\n  private showFilenamePreview(filename: string): void {\r\n    const preview = document.getElementById('filename-preview');\r\n    if (preview) {\r\n      preview.textContent = `ğŸ“„ ${filename}`;\r\n      preview.style.display = 'block';\r\n      \r\n      // 3ç§’åéšè—\r\n      setTimeout(() => {\r\n        preview.style.display = 'none';\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\nprivate async sendToVSCode(content: string, filename: string): Promise<void> {\r\n  try {\r\n    // è·å–ä¿å­˜è·¯å¾„é…ç½®\r\n    const settings = await chrome.storage.sync.get({ savePath: '' });\r\n    const savePath = (settings.savePath || '').trim();\r\n    \r\n    const message: MessageToVSCode = {\r\n      action: 'sendToVSCode',\r\n      content,\r\n      filename,\r\n      savePath  // æ·»åŠ ä¿å­˜è·¯å¾„\r\n    };\r\n    \r\n    console.log('ğŸ“¤ å‘é€åˆ° VS Code:', {\r\n      filename,\r\n      savePath: savePath || '(æ ¹ç›®å½•)',\r\n      contentLength: content.length\r\n    });\r\n    \r\n    // è®¾ç½®è¶…æ—¶\r\n    const timeout = setTimeout(() => {\r\n      this.showError('å‘é€è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ VS Code æ˜¯å¦å·²å¯åŠ¨ WebSocket æœåŠ¡');\r\n    }, 5000);\r\n    \r\n    // å‘é€æ¶ˆæ¯\r\n    chrome.runtime.sendMessage(message, (response: MessageResponse) => {\r\n      clearTimeout(timeout);\r\n      \r\n      // æ£€æŸ¥æ‰©å±•é€šä¿¡é”™è¯¯\r\n      if (chrome.runtime.lastError) {\r\n        console.error('âŒ æ‰©å±•é€šä¿¡å¤±è´¥:', chrome.runtime.lastError);\r\n        this.showError('æ‰©å±•é€šä¿¡å¤±è´¥ï¼Œè¯·é‡æ–°åŠ è½½é¡µé¢');\r\n        return;\r\n      }\r\n      \r\n      // æ£€æŸ¥å“åº”\r\n      if (response && response.success) {\r\n        const pathInfo = savePath ? ` â†’ ${savePath}/` : ' â†’ æ ¹ç›®å½•/';\r\n        this.showSuccess(`âœ… å·²ä¿å­˜: ${pathInfo}${filename}`);\r\n        console.log('âœ… æ–‡ä»¶ä¿å­˜æˆåŠŸ');\r\n      } else {\r\n        const errorMsg = response?.error || 'æœªçŸ¥é”™è¯¯';\r\n        console.error('âŒ ä¿å­˜å¤±è´¥:', errorMsg);\r\n        this.showError(`ä¿å­˜å¤±è´¥ï¼š${errorMsg}`);\r\n      }\r\n    });\r\n    \r\n  } catch (error) {\r\n    console.error('âŒ sendToVSCode å‡ºé”™:', error);\r\n    this.showError('å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•');\r\n  }\r\n}\r\n\r\n\r\n\r\n  private setupMessageListener(): void {\r\n    chrome.runtime.onMessage.addListener((message: ConnectionStatus) => {\r\n      if (message.type === 'connectionStatus') {\r\n        this.updateConnectionStatus(message.status === 'connected');\r\n      }\r\n    });\r\n  }\r\n\r\n  private updateConnectionStatus(connected: boolean): void {\r\n    if (!this.statusElement) return;\r\n    \r\n    const statusText = this.statusElement.querySelector('.status-text');\r\n    const statusDot = this.statusElement.querySelector('.status-dot');\r\n    \r\n    if (connected) {\r\n      this.statusElement.classList.add('connected');\r\n      if (statusText) statusText.textContent = 'å·²è¿æ¥';\r\n      if (statusDot) statusDot.classList.add('active');\r\n    } else {\r\n      this.statusElement.classList.remove('connected');\r\n      if (statusText) statusText.textContent = 'æœªè¿æ¥';\r\n      if (statusDot) statusDot.classList.remove('active');\r\n    }\r\n  }\r\n\r\n  private showSuccess(message: string): void {\r\n    this.showNotification(message, 'success');\r\n  }\r\n\r\n  private showError(message: string): void {\r\n    this.showNotification(message, 'error');\r\n  }\r\n\r\n  private showNotification(message: string, type: 'success' | 'error'): void {\r\n    const notification = document.createElement('div');\r\n    notification.className = `notification ${type}`;\r\n    notification.textContent = message;\r\n    document.body.appendChild(notification);\r\n    \r\n    setTimeout(() => notification.remove(), 3000);\r\n  }\r\n\r\n  private delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  // æç¤ºè¯ç›¸å…³æ–¹æ³•\r\n  private async loadPromptButtons(): Promise<void> {\r\n    try {\r\n      // ä¼˜å…ˆä» local åŠ è½½ï¼ˆæ–°å­˜å‚¨æ–¹å¼ï¼‰\r\n      const localResult = await chrome.storage.local.get(['promptFiles']);\r\n      let promptFiles = localResult.promptFiles || [];\r\n      \r\n      // å¦‚æœ local ä¸­æ²¡æœ‰ï¼Œå›é€€åˆ° syncï¼ˆæ—§å­˜å‚¨æ–¹å¼ï¼‰\r\n      if (promptFiles.length === 0) {\r\n        const syncResult = await chrome.storage.sync.get(['promptFiles']);\r\n        promptFiles = syncResult.promptFiles || [];\r\n        if (promptFiles.length > 0) {\r\n          console.log('ä» sync åŠ è½½æç¤ºè¯ï¼ˆæ—§æ ¼å¼ï¼‰');\r\n        }\r\n      }\r\n      \r\n      this.createPromptButtons(promptFiles);\r\n    } catch (error) {\r\n      console.error('åŠ è½½æç¤ºè¯å¤±è´¥:', error);\r\n    }\r\n  }\r\n\r\n  private createPromptButtons(prompts: any[]): void {\r\n    if (!this.promptButtons || prompts.length === 0) return;\r\n\r\n    this.promptButtons.innerHTML = prompts\r\n      .filter(p => p.enabled)\r\n      .map(prompt => `\r\n        <button \r\n          class=\"prompt-btn\" \r\n          data-prompt-id=\"${prompt.id}\"\r\n          data-prompt-name=\"${this.escapeHtml(prompt.name)}\"\r\n          style=\"\r\n            padding: 8px 12px;\r\n            background: #6c5ce7;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: all 0.2s;\r\n            text-align: left;\r\n          \"\r\n          onmouseover=\"this.style.background='#5f4dd1'\"\r\n          onmouseout=\"this.style.background='#6c5ce7'\"\r\n        >\r\n          ğŸ“ ${this.escapeHtml(prompt.name)}\r\n        </button>\r\n      `)\r\n      .join('');\r\n\r\n    // ä¿å­˜æç¤ºè¯å†…å®¹åˆ°æŒ‰é’®çš„è‡ªå®šä¹‰å±æ€§\r\n    const buttons = this.promptButtons.querySelectorAll('.prompt-btn');\r\n    buttons.forEach((btn, index) => {\r\n      (btn as any).__promptContent = prompts.filter(p => p.enabled)[index].path;\r\n      \r\n      btn.addEventListener('click', (e) => {\r\n        const target = e.currentTarget as any;\r\n        const content = target.__promptContent;\r\n        const name = target.getAttribute('data-prompt-name');\r\n        if (content) {\r\n          this.applyPrompt(content, name || '');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private async applyPrompt(content: string, promptName: string): Promise<void> {\r\n    try {\r\n      console.log('ğŸ“ å¼€å§‹åº”ç”¨æç¤ºè¯:', promptName);\r\n      \r\n      if (!content || content.trim().length === 0) {\r\n        this.showError('æç¤ºè¯å†…å®¹ä¸ºç©º');\r\n        return;\r\n      }\r\n      \r\n      console.log('âœ… å†…å®¹é•¿åº¦:', content.length);\r\n      \r\n      // 1. æŸ¥æ‰¾ System Instructions æŒ‰é’®\r\n      const sysInstructionsBtn = document.querySelector<HTMLElement>(\r\n        'button[data-test-system-instructions-card], ' +\r\n        'button[aria-label=\"System instructions\"], ' +\r\n        'button.system-instructions-card'\r\n      );\r\n      \r\n      if (!sysInstructionsBtn) {\r\n        this.showError('æœªæ‰¾åˆ° System Instructions æŒ‰é’®');\r\n        return;\r\n      }\r\n      \r\n      console.log('âœ… æ‰¾åˆ° System Instructions æŒ‰é’®');\r\n      \r\n      // 2. ç‚¹å‡»æ‰“å¼€ç•Œé¢\r\n      sysInstructionsBtn.click();\r\n      await this.delay(500);\r\n      \r\n      // 3. æŸ¥æ‰¾æ–‡æœ¬æ¡†\r\n      const textarea = document.querySelector<HTMLTextAreaElement>(\r\n        'textarea[aria-label=\"System instructions\"], ' +\r\n        'textarea[placeholder*=\"tone and style\"], ' +\r\n        'textarea.in-run-settings'\r\n      );\r\n      \r\n      if (!textarea) {\r\n        this.showError('æœªæ‰¾åˆ°æ–‡æœ¬æ¡†');\r\n        // å°è¯•å…³é—­å¯èƒ½æ‰“å¼€çš„å¯¹è¯æ¡†\r\n        this.closeSystemInstructionsDialog();\r\n        return;\r\n      }\r\n      \r\n      console.log('âœ… æ‰¾åˆ°æ–‡æœ¬æ¡†');\r\n      \r\n      // 4. æ¸…ç©ºç°æœ‰å†…å®¹\r\n      textarea.value = '';\r\n      \r\n      // 5. å¡«å……æ–°å†…å®¹\r\n      textarea.value = content;\r\n      \r\n      // 6. è§¦å‘äº‹ä»¶ä»¥ç¡®ä¿ Angular æ£€æµ‹åˆ°å˜åŒ–\r\n      textarea.blur();\r\n      textarea.dispatchEvent(new Event('input', { bubbles: true }));\r\n      textarea.dispatchEvent(new Event('change', { bubbles: true }));\r\n      textarea.dispatchEvent(new Event('blur', { bubbles: true }));\r\n      \r\n\r\n      // è§¦å‘ Angular çš„ ngModelChange\r\n      const event = new CustomEvent('input', { bubbles: true, cancelable: true });\r\n      textarea.dispatchEvent(event);\r\n      \r\n      console.log('âœ… å†…å®¹å·²å¡«å……');\r\n      \r\n      // 7. ç­‰å¾… Angular æ›´æ–°\r\n      await this.delay(800);\r\n      \r\n      // 8. å…³é—­å¯¹è¯æ¡†\r\n      this.closeSystemInstructionsDialog();\r\n      \r\n      this.showSuccess(`âœ… å·²åº”ç”¨: ${promptName}`);\r\n      \r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯';\r\n      console.error('åº”ç”¨æç¤ºè¯å¤±è´¥:', error);\r\n      this.showError(`åº”ç”¨å¤±è´¥ï¼š${errorMessage}`);\r\n    }\r\n  }\r\n\r\n  private closeSystemInstructionsDialog(): void {\r\n    // æŸ¥æ‰¾å…¸å‹å…³é—­æŒ‰é’® - ä½¿ç”¨æ›´ç²¾ç¡®çš„é€‰æ‹©å™¨\r\n    const selectors = [\r\n      'button[data-test-close-button]',\r\n      'button[aria-label=\"Close panel\"]',\r\n      'button[mat-dialog-close]',\r\n      'button[iconname=\"close\"]',\r\n      'button.ms-button-icon[iconname=\"close\"]',\r\n      'button[aria-label=\"Close panel\"][data-test-close-button]'\r\n    ];\r\n    \r\n    let closeBtn: HTMLElement | null = null;\r\n    \r\n    // å°è¯•æ¯ä¸ªé€‰æ‹©å™¨\r\n    for (const selector of selectors) {\r\n      closeBtn = document.querySelector<HTMLElement>(selector);\r\n      if (closeBtn && closeBtn.offsetParent !== null) {\r\n        console.log(`âœ… æ‰¾åˆ°å…³é—­æŒ‰é’®: ${selector}`);\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (closeBtn) {\r\n      // æ£€æŸ¥æŒ‰é’®çŠ¶æ€\r\n      const isVisible = closeBtn.offsetParent !== null;\r\n      const isDisabled = closeBtn.hasAttribute('aria-disabled') && closeBtn.getAttribute('aria-disabled') === 'true';\r\n      const isEnabled = closeBtn.getAttribute('aria-disabled') === 'false' || !closeBtn.hasAttribute('aria-disabled');\r\n      \r\n      console.log('å…³é—­æŒ‰é’®çŠ¶æ€:', {\r\n        isVisible,\r\n        isDisabled,\r\n        isEnabled,\r\n        ariaDisabled: closeBtn.getAttribute('aria-disabled'),\r\n        className: closeBtn.className\r\n      });\r\n      \r\n      // ç¡®ä¿æŒ‰é’®å¯è§ä¸”å¯ç‚¹å‡»\r\n      if (isVisible && isEnabled) {\r\n        try {\r\n          closeBtn.click();\r\n          console.log('âœ… å·²è‡ªåŠ¨å…³é—­System Instructionsç•Œé¢');\r\n        } catch (error) {\r\n          console.error('ç‚¹å‡»å…³é—­æŒ‰é’®å¤±è´¥:', error);\r\n          // å°è¯•å…¶ä»–æ–¹å¼è§¦å‘ç‚¹å‡»\r\n          const clickEvent = new MouseEvent('click', {\r\n            bubbles: true,\r\n            cancelable: true,\r\n            view: window\r\n          });\r\n          closeBtn.dispatchEvent(clickEvent);\r\n          console.log('âœ… å·²é€šè¿‡äº‹ä»¶è§¦å‘å…³é—­System Instructionsç•Œé¢');\r\n        }\r\n      } else {\r\n        console.warn('âŒ å…³é—­æŒ‰é’®ä¸å¯ç”¨æˆ–å·²ç¦ç”¨', {\r\n          isVisible,\r\n          isDisabled,\r\n          isEnabled\r\n        });\r\n      }\r\n    } else {\r\n      console.warn('âŒ æœªæ‰¾åˆ°å¯ç”¨çš„å…³é—­æŒ‰é’®');\r\n      // è°ƒè¯•ï¼šåˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„æŒ‰é’®\r\n      const allButtons = document.querySelectorAll('button');\r\n      console.log('é¡µé¢ä¸Šçš„æ‰€æœ‰æŒ‰é’®:', Array.from(allButtons).map(btn => ({\r\n        tagName: btn.tagName,\r\n        className: btn.className,\r\n        ariaLabel: btn.getAttribute('aria-label'),\r\n        dataTest: btn.getAttribute('data-test-close-button'),\r\n        iconName: btn.getAttribute('iconname'),\r\n        matDialogClose: btn.getAttribute('mat-dialog-close')\r\n      })));\r\n    }\r\n  }\r\n\r\n  private escapeHtml(text: string): string {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n  }\r\n}\r\n\r\n// åˆå§‹åŒ–\r\nnew FloatingPanel();\r\n"],"names":["DOMHelper","findLatestCopyButton","perfStart","performance","now","console","group","currentHostname","window","location","hostname","log","Date","toLocaleTimeString","result","includes","this","findPerplexityCopyButton","defaultConfig","DEFAULT_SELECTORS","find","c","name","findButtonWithConfig","findButtonGeneric","error","timeTaken","toFixed","getMemoryUsage","groupEnd","loadConfigs","startTime","time","replyContainers","document","querySelectorAll","timeEnd","length","warn","lastReply","copyBtns","selectedBtn","ariaLabel","getAttribute","dataTestId","text","textContent","trim","substring","allButtons","Array","from","i","button","toLowerCase","config","selector","copyButtonSelector","findAIStudioCopyButton","findClaudeCopyButton","responseContainerSelector","responses","lastResponse","querySelector","buttons","btn","svg","path","d","strategies","fn","icon","closest","item","strategy","selectors","e","getClipboardContent","content","navigator","clipboard","readText","Error","memory","usedJSHeapSize","totalJSHeapSize","makeDraggable","element","currentX","currentY","initialX","initialY","isDragging","header","style","cursor","addEventListener","target","classList","contains","clientX","offsetLeft","clientY","offsetTop","preventDefault","left","top","right","bottom","undefined","constructor","panel","statusElement","enabled","dailyCounter","promptButtons","isDebugMode","initialize","checkDebugMode","search","localStorage","getItem","debugLog","message","args","debugWarn","checkAndInitialize","loadDailyCounter","queryConnectionStatus","chrome","runtime","sendMessage","action","response","lastError","connected","updateConnectionStatus","today","toDateString","storage","local","get","lastSaveDate","updateDailyCounter","set","sync","enabledUrls","showOnAllSites","isUrlEnabled","createPanel","setupMessageListener","onChanged","addListener","changes","siteConfigs","reload","some","url","pattern","replace","RegExp","test","createElement","id","innerHTML","body","appendChild","sendButton","getElementById","handleSendClick","closeButton","togglePanel","toggleBtn","promptSection","collapsed","toggle","promptsCollapsed","res","add","loadPromptButtons","display","overallStart","handleAIStudioCopy","copyButton","showError","click","delay","filename","generateSmartFilename","showFilenamePreview","sendToVSCode","overallEnd","errorMessage","moreButtons","menuButton","date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","sequence","firstSentence","extractFirstSentence","cleanedSentence","cleanSentence","truncateFilename","sentences","split","sentence","cleaned","removePatterns","maxLength","truncated","lastDash","lastIndexOf","preview","setTimeout","savePath","contentLength","timeout","clearTimeout","success","pathInfo","showSuccess","errorMsg","onMessage","type","status","statusText","statusDot","remove","showNotification","notification","className","ms","Promise","resolve","promptFiles","createPromptButtons","prompts","filter","p","map","prompt","escapeHtml","join","forEach","index","__promptContent","currentTarget","applyPrompt","promptName","sysInstructionsBtn","textarea","closeSystemInstructionsDialog","value","blur","dispatchEvent","Event","bubbles","event","CustomEvent","cancelable","closeBtn","offsetParent","isVisible","isDisabled","hasAttribute","isEnabled","ariaDisabled","clickEvent","MouseEvent","view","tagName","dataTest","iconName","matDialogClose","div"],"sourceRoot":""}