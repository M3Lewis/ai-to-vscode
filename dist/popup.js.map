{"version":3,"file":"popup.js","mappings":"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","sources":["webpack://ai-to-vscode-bridge/./src/popup.ts"],"sourcesContent":["interface SiteConfig {\r\n  hostname: string;\r\n  copyButtonSelector: string;\r\n  responseContainerSelector?: string;\r\n  name?: string;\r\n}\r\n\r\ninterface PromptFile {\r\n  id: string;\r\n  name: string;      // ÊòæÁ§∫ÂêçÁß∞\r\n  path: string;      // Â≠òÂÇ®Êñá‰ª∂ÂÜÖÂÆπÔºàËÄå‰∏çÊòØË∑ØÂæÑÔºâ\r\n  enabled: boolean;  // ÊòØÂê¶ÂêØÁî®\r\n}\r\n\r\ninterface Settings {\r\n  port: number;\r\n  enabledUrls: string[];\r\n  showOnAllSites: boolean;\r\n  siteConfigs: SiteConfig[];\r\n  promptFiles?: PromptFile[];  // ÊèêÁ§∫ËØçÊñá‰ª∂ÂàóË°®\r\n}\r\n\r\n// ‰øÆÊîπÂéüÊù•ÁöÑ ButtonCandidate Êé•Âè£ÔºåÂéªÊéâ element Â±ûÊÄß\r\ninterface ButtonCandidate {\r\n  selector: string;\r\n  label: string;\r\n  ariaLabel: string;\r\n  text: string;\r\n  score: number;\r\n}\r\n\r\n// Êñ∞Â¢ûÔºöËçâÁ®øÊé•Âè£\r\ninterface DraftSettings {\r\n  port?: number;\r\n  enabledUrls?: string[];\r\n  showOnAllSites?: boolean;\r\n  siteConfigs?: SiteConfig[];\r\n  promptFiles?: PromptFile[];\r\n  timestamp?: number;\r\n}\r\n\r\nconst DEFAULT_URLS = [\r\n  'chat.openai.com',\r\n  'claude.ai',\r\n  'gemini.google.com',\r\n  'chatgpt.com',\r\n  'poe.com',\r\n  'perplexity.ai'\r\n];\r\n\r\n\r\nclass PopupManager {\r\n  private autoSaveTimer: number | null = null; // Êñ∞Â¢ûÔºöËá™Âä®‰øùÂ≠òÂÆöÊó∂Âô®\r\n  private hasDraft: boolean = false; // Êñ∞Â¢ûÔºöÊòØÂê¶ÊúâËçâÁ®ø\r\n\r\n  private portInput: HTMLInputElement | null = null;\r\n  private showOnAllSitesCheckbox: HTMLInputElement | null = null;\r\n  private urlList: HTMLElement | null = null;\r\n  private newUrlInput: HTMLInputElement | null = null;\r\n  private saveButton: HTMLButtonElement | null = null;\r\n  private resetButton: HTMLButtonElement | null = null;\r\n  private addUrlButton: HTMLButtonElement | null = null;\r\n  private exportButton: HTMLButtonElement | null = null;\r\n  private importButton: HTMLButtonElement | null = null;\r\n  private importFileInput: HTMLInputElement | null = null;\r\n  private smartFindButton: HTMLButtonElement | null = null;\r\n  private statusDiv: HTMLElement | null = null;\r\n  \r\n  private configList: HTMLElement | null = null;\r\n  private configHostnameInput: HTMLInputElement | null = null;\r\n  private configSelectorInput: HTMLInputElement | null = null;\r\n  private configContainerInput: HTMLInputElement | null = null;\r\n  private addConfigButton: HTMLButtonElement | null = null;\r\n  \r\n  // ÊèêÁ§∫ËØçÁõ∏ÂÖ≥ÂÖÉÁ¥†\r\n  private promptNameInput: HTMLInputElement | null = null;\r\n  private promptPathInput: HTMLInputElement | null = null;\r\n  private selectFileButton: HTMLButtonElement | null = null;\r\n  private promptFileInput: HTMLInputElement | null = null;\r\n  private addPromptButton: HTMLButtonElement | null = null;\r\n  private promptList: HTMLElement | null = null;\r\n  private currentFileContent: string = '';\r\n  \r\n  private currentSettings: Settings = {\r\n    port: 8765,\r\n    enabledUrls: [...DEFAULT_URLS],\r\n    showOnAllSites: false,\r\n    siteConfigs: [],\r\n    promptFiles: []\r\n  };\r\n\r\n  private selectedCandidate: ButtonCandidate | null = null;\r\n\r\n  constructor() {\r\n    this.initElements();\r\n    this.loadSettings();\r\n    this.setupEventListeners();\r\n    this.setupAutoSave();\r\n  }\r\n\r\n  private initElements(): void {\r\n    this.portInput = document.getElementById('port-input') as HTMLInputElement;\r\n    this.showOnAllSitesCheckbox = document.getElementById('show-on-all-sites') as HTMLInputElement;\r\n    this.urlList = document.getElementById('url-list');\r\n    this.newUrlInput = document.getElementById('new-url-input') as HTMLInputElement;\r\n    this.saveButton = document.getElementById('save-settings') as HTMLButtonElement;\r\n    this.resetButton = document.getElementById('reset-defaults') as HTMLButtonElement;\r\n    this.addUrlButton = document.getElementById('add-url-btn') as HTMLButtonElement;\r\n    this.exportButton = document.getElementById('export-config') as HTMLButtonElement;\r\n    this.importButton = document.getElementById('import-config') as HTMLButtonElement;\r\n    this.importFileInput = document.getElementById('import-file-input') as HTMLInputElement;\r\n    this.smartFindButton = document.getElementById('smart-find-btn') as HTMLButtonElement;\r\n    this.statusDiv = document.getElementById('status');\r\n    \r\n    this.configList = document.getElementById('config-list');\r\n    this.configHostnameInput = document.getElementById('config-hostname') as HTMLInputElement;\r\n    this.configSelectorInput = document.getElementById('config-selector') as HTMLInputElement;\r\n    this.configContainerInput = document.getElementById('config-container') as HTMLInputElement;\r\n    this.addConfigButton = document.getElementById('add-config-btn') as HTMLButtonElement;\r\n    \r\n    // ÂàùÂßãÂåñÊèêÁ§∫ËØçÁõ∏ÂÖ≥ÂÖÉÁ¥†\r\n    this.promptNameInput = document.getElementById('prompt-name') as HTMLInputElement;\r\n    this.promptPathInput = document.getElementById('prompt-path') as HTMLInputElement;\r\n    this.selectFileButton = document.getElementById('select-file-btn') as HTMLButtonElement;\r\n    this.promptFileInput = document.getElementById('prompt-file-input') as HTMLInputElement;\r\n    this.addPromptButton = document.getElementById('add-prompt-btn') as HTMLButtonElement;\r\n    this.promptList = document.getElementById('prompt-list');\r\n  }\r\n\r\n  private async loadSettings(): Promise<void> {\r\n  // ÂÖàÂä†ËΩΩÊ≠£ÂºèÈÖçÁΩÆ\r\n  const settings = await chrome.storage.sync.get({\r\n    port: 8765,\r\n    enabledUrls: [...DEFAULT_URLS],\r\n    showOnAllSites: false,\r\n    siteConfigs: [],\r\n    promptFiles: []\r\n  }) as Settings;\r\n\r\n  // Â∞ùËØïÂä†ËΩΩËçâÁ®ø\r\n  const draft = await chrome.storage.local.get('draftSettings');\r\n  \r\n  if (draft.draftSettings) {\r\n    const draftData: DraftSettings = draft.draftSettings;\r\n    \r\n    // Ê£ÄÊü•ËçâÁ®øÊòØÂê¶Âú®5ÂàÜÈíüÂÜÖÔºàÈÅøÂÖçÂä†ËΩΩËøáÊúüËçâÁ®øÔºâ\r\n    const fiveMinutes = 5 * 60 * 1000;\r\n    if (draftData.timestamp && Date.now() - draftData.timestamp < fiveMinutes) {\r\n      // ‰ΩøÁî®ËçâÁ®øË¶ÜÁõñËÆæÁΩÆ\r\n      this.currentSettings = {\r\n        port: draftData.port ?? settings.port,\r\n        enabledUrls: draftData.enabledUrls ?? settings.enabledUrls,\r\n        showOnAllSites: draftData.showOnAllSites ?? settings.showOnAllSites,\r\n        siteConfigs: draftData.siteConfigs ?? settings.siteConfigs,\r\n        promptFiles: draftData.promptFiles ?? settings.promptFiles\r\n      };\r\n      \r\n      this.hasDraft = true;\r\n      this.showDraftIndicator();\r\n    } else {\r\n      // ËçâÁ®øËøáÊúüÔºå‰ΩøÁî®Ê≠£ÂºèÈÖçÁΩÆ\r\n      this.currentSettings = settings;\r\n      await chrome.storage.local.remove('draftSettings');\r\n    }\r\n  } else {\r\n    this.currentSettings = settings;\r\n  }\r\n\r\n  // Êõ¥Êñ∞UI\r\n  if (this.portInput) this.portInput.value = this.currentSettings.port.toString();\r\n  if (this.showOnAllSitesCheckbox) this.showOnAllSitesCheckbox.checked = this.currentSettings.showOnAllSites;\r\n  \r\n  this.renderUrlList();\r\n  this.renderConfigList();\r\n  this.renderPromptList();\r\n}\r\n\r\n  // Êñ∞Â¢ûÔºöÊòæÁ§∫ËçâÁ®øÊåáÁ§∫Âô®\r\nprivate showDraftIndicator(): void {\r\n  if (this.saveButton) {\r\n    this.saveButton.textContent = 'üíæ ‰øùÂ≠òËÆæÁΩÆ (ÊúâÊú™‰øùÂ≠òÁöÑÊõ¥Êîπ)';\r\n    this.saveButton.style.background = '#e67e22';\r\n  }\r\n}\r\n\r\n// Êñ∞Â¢ûÔºöÈöêËóèËçâÁ®øÊåáÁ§∫Âô®\r\nprivate hideDraftIndicator(): void {\r\n  if (this.saveButton) {\r\n    this.saveButton.textContent = 'üíæ ‰øùÂ≠òËÆæÁΩÆ';\r\n    this.saveButton.style.background = '#007acc';\r\n  }\r\n  this.hasDraft = false;\r\n}\r\n\r\n// Êñ∞Â¢ûÔºöËÆæÁΩÆËá™Âä®‰øùÂ≠ò\r\nprivate setupAutoSave(): void {\r\n  // ÁõëÂê¨ÊâÄÊúâÂèØËÉΩ‰øÆÊîπÈÖçÁΩÆÁöÑËæìÂÖ•\r\n  this.portInput?.addEventListener('input', () => this.scheduleAutoSave());\r\n  this.showOnAllSitesCheckbox?.addEventListener('change', () => this.scheduleAutoSave());\r\n}\r\n\r\n// Êñ∞Â¢ûÔºöÂª∂ËøüËá™Âä®‰øùÂ≠òÔºàÈò≤Ê≠¢È¢ëÁπÅ‰øùÂ≠òÔºâ\r\nprivate scheduleAutoSave(): void {\r\n  if (this.autoSaveTimer) {\r\n    clearTimeout(this.autoSaveTimer);\r\n  }\r\n\r\n  this.autoSaveTimer = window.setTimeout(() => {\r\n    this.saveDraft();\r\n  }, 500); // 500msÂêé‰øùÂ≠òËçâÁ®ø\r\n}\r\n\r\n// Êñ∞Â¢ûÔºö‰øùÂ≠òËçâÁ®ø\r\nprivate async saveDraft(): Promise<void> {\r\n  const draft: DraftSettings = {\r\n    port: parseInt(this.portInput?.value || '8765'),\r\n    enabledUrls: this.currentSettings.enabledUrls,\r\n    showOnAllSites: this.showOnAllSitesCheckbox?.checked || false,\r\n    siteConfigs: this.currentSettings.siteConfigs,\r\n    promptFiles: this.currentSettings.promptFiles,\r\n    timestamp: Date.now()\r\n  };\r\n\r\n  await chrome.storage.local.set({ draftSettings: draft });\r\n  \r\n  if (!this.hasDraft) {\r\n    this.hasDraft = true;\r\n    this.showDraftIndicator();\r\n  }\r\n}\r\n\r\n  private renderUrlList(): void {\r\n    if (!this.urlList) return;\r\n\r\n    if (this.currentSettings.enabledUrls.length === 0) {\r\n      this.urlList.innerHTML = '<div class=\"empty-state\">ÊöÇÊó†ÁΩëÁ´ô</div>';\r\n      return;\r\n    }\r\n\r\n    this.urlList.innerHTML = this.currentSettings.enabledUrls\r\n      .map((url, index) => `\r\n        <div class=\"url-item\">\r\n          <span>${this.escapeHtml(url)}</span>\r\n          <button data-index=\"${index}\">Âà†Èô§</button>\r\n        </div>\r\n      `)\r\n      .join('');\r\n\r\n    this.urlList.querySelectorAll('button').forEach(btn => {\r\n      btn.addEventListener('click', (e) => {\r\n        const index = parseInt((e.target as HTMLElement).getAttribute('data-index') || '0');\r\n        this.removeUrl(index);\r\n      });\r\n    });\r\n  }\r\n\r\n  private renderConfigList(): void {\r\n    if (!this.configList) return;\r\n\r\n    if (this.currentSettings.siteConfigs.length === 0) {\r\n      this.configList.innerHTML = '<div class=\"empty-state\">ÊöÇÊó†Ëá™ÂÆö‰πâÈÖçÁΩÆ</div>';\r\n      return;\r\n    }\r\n\r\n    this.configList.innerHTML = this.currentSettings.siteConfigs\r\n      .map((config, index) => `\r\n        <div class=\"url-item\">\r\n          <div style=\"flex: 1;\">\r\n            <div style=\"font-weight: 500; color: #fff;\">${this.escapeHtml(config.hostname)}</div>\r\n            <div style=\"font-size: 11px; color: #888; margin-top: 2px;\">\r\n              ${this.escapeHtml(config.copyButtonSelector)}\r\n            </div>\r\n            ${config.responseContainerSelector ? `\r\n              <div style=\"font-size: 10px; color: #666; margin-top: 2px;\">\r\n                ÂÆπÂô®: ${this.escapeHtml(config.responseContainerSelector)}\r\n              </div>\r\n            ` : ''}\r\n          </div>\r\n          <button data-index=\"${index}\">Âà†Èô§</button>\r\n        </div>\r\n      `)\r\n      .join('');\r\n\r\n    this.configList.querySelectorAll('button').forEach(btn => {\r\n      btn.addEventListener('click', (e) => {\r\n        const index = parseInt((e.target as HTMLElement).getAttribute('data-index') || '0');\r\n        this.removeConfig(index);\r\n      });\r\n    });\r\n  }\r\n\r\n  private setupEventListeners(): void {\r\n    this.saveButton?.addEventListener('click', () => this.saveSettings());\r\n    this.resetButton?.addEventListener('click', () => this.resetToDefaults());\r\n    this.addUrlButton?.addEventListener('click', () => this.addUrl());\r\n    this.addConfigButton?.addEventListener('click', () => this.addConfig());\r\n    this.exportButton?.addEventListener('click', () => this.exportConfig());\r\n    this.importButton?.addEventListener('click', () => this.importFileInput?.click());\r\n    this.smartFindButton?.addEventListener('click', () => this.smartFindCopyButtons());\r\n    this.importFileInput?.addEventListener('change', (e) => this.handleImportFile(e));\r\n    \r\n    this.newUrlInput?.addEventListener('keypress', (e) => {\r\n      if (e.key === 'Enter') this.addUrl();\r\n    });\r\n\r\n    this.configSelectorInput?.addEventListener('keypress', (e) => {\r\n      if (e.key === 'Enter' && e.ctrlKey) this.addConfig();\r\n    });\r\n\r\n    // ÊèêÁ§∫ËØçÁõ∏ÂÖ≥‰∫ã‰ª∂ÁõëÂê¨Âô®\r\n    this.selectFileButton?.addEventListener('click', () => this.promptFileInput?.click());\r\n    this.promptFileInput?.addEventListener('change', (e) => this.handleFileSelect(e));\r\n    this.addPromptButton?.addEventListener('click', () => this.addPrompt());\r\n    \r\n    this.promptNameInput?.addEventListener('keypress', (e) => {\r\n      if (e.key === 'Enter') this.addPrompt();\r\n    });\r\n  }\r\nprivate async smartFindCopyButtons(): Promise<void> {\r\n  try {\r\n    const tabs = await chrome.tabs.query({ active: true, currentWindow: true });\r\n    const activeTab = tabs[0];\r\n    \r\n    if (!activeTab || !activeTab.id) {\r\n      this.showStatus('Êó†Ê≥ïËé∑ÂèñÂΩìÂâçÊ†áÁ≠æÈ°µ', 'error');\r\n      return;\r\n    }\r\n\r\n    // Ëá™Âä®Â°´ÂÖÖÂüüÂêç\r\n    if (activeTab.url) {\r\n      try {\r\n        const url = new URL(activeTab.url);\r\n        if (this.configHostnameInput) {\r\n          this.configHostnameInput.value = url.hostname;\r\n        }\r\n      } catch (e) {\r\n        console.error('Ëß£ÊûêURLÂ§±Ë¥•:', e);\r\n      }\r\n    }\r\n\r\n    this.showScanningModal();\r\n\r\n    // Ê≥®ÂÖ•ËÑöÊú¨Êü•ÊâæÊåâÈíÆ\r\n    const results = await chrome.scripting.executeScript({\r\n      target: { tabId: activeTab.id },\r\n      func: () => {\r\n        // === ËøôÊÆµ‰ª£Á†Å‰ºöÂú®ÁõÆÊ†áÈ°µÈù¢‰∏≠ÊâßË°å ===\r\n        // Âú®ËøôÈáåÈáçÊñ∞ÂÆö‰πâÔºåÈÅøÂÖç‰∏éÂ§ñÈÉ®ÂÜ≤Á™Å\r\n        type CandidateResult = {\r\n          selector: string;\r\n          label: string;\r\n          ariaLabel: string;\r\n          text: string;\r\n          score: number;\r\n        };\r\n\r\n        const candidates: CandidateResult[] = [];\r\n        const buttons = document.querySelectorAll('button');\r\n\r\n        buttons.forEach((button) => {\r\n          const text = button.textContent?.toLowerCase().trim() || '';\r\n          const ariaLabel = button.getAttribute('aria-label')?.toLowerCase() || '';\r\n          const title = button.getAttribute('title')?.toLowerCase() || '';\r\n          const className = button.className.toLowerCase();\r\n          \r\n          let score = 0;\r\n          \r\n          // ËØÑÂàÜËßÑÂàô\r\n          if (text.includes('copy') || text.includes('Â§çÂà∂')) score += 10;\r\n          if (ariaLabel.includes('copy') || ariaLabel.includes('Â§çÂà∂')) score += 10;\r\n          if (title.includes('copy') || title.includes('Â§çÂà∂')) score += 5;\r\n          if (className.includes('copy')) score += 5;\r\n          \r\n          const svg = button.querySelector('svg');\r\n          if (svg) score += 2;\r\n          \r\n          // Âè™‰øùÁïôÁõ∏ÂÖ≥Â∫¶Ë∂≥Â§üÈ´òÁöÑÊåâÈíÆ\r\n          if (score >= 5) {\r\n            let selector = '';\r\n            const ariaLabelAttr = button.getAttribute('aria-label');\r\n            \r\n            // ÁîüÊàêÈÄâÊã©Âô®\r\n            if (ariaLabelAttr) {\r\n              // ËΩ¨‰πâÂºïÂè∑\r\n              const escapedLabel = ariaLabelAttr.replace(/\"/g, '\\\\\"');\r\n              selector = `button[aria-label=\"${escapedLabel}\"]`;\r\n            } else if (button.id) {\r\n              selector = `button#${button.id}`;\r\n            } else if (button.className && button.className.trim()) {\r\n              const classes = button.className.trim().split(/\\s+/).slice(0, 2);\r\n              if (classes.length > 0) {\r\n                selector = `button.${classes.join('.')}`;\r\n              } else {\r\n                selector = 'button';\r\n              }\r\n            } else {\r\n              selector = 'button';\r\n            }\r\n\r\n            candidates.push({\r\n              selector: selector,\r\n              label: text || ariaLabel || '(Êó†Ê†áÁ≠æ)',\r\n              ariaLabel: ariaLabelAttr || '',\r\n              text: text,\r\n              score: score\r\n            });\r\n          }\r\n        });\r\n\r\n        // ÊåâÂàÜÊï∞ÊéíÂ∫è\r\n        candidates.sort((a, b) => b.score - a.score);\r\n        \r\n        // ËøîÂõûÂâç10‰∏™\r\n        return candidates.slice(0, 10);\r\n      }\r\n    });\r\n\r\n    const candidates: ButtonCandidate[] = results[0]?.result || [];\r\n\r\n    if (candidates.length === 0) {\r\n      this.showEmptyResultModal();\r\n    } else {\r\n      this.showCandidatesModal(candidates);\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('Êô∫ËÉΩÊü•ÊâæÂ§±Ë¥•:', error);\r\n    \r\n    let errorMsg = 'Êô∫ËÉΩÊü•ÊâæÂ§±Ë¥•';\r\n    if (error instanceof Error) {\r\n      errorMsg += ': ' + error.message;\r\n    }\r\n    \r\n    this.showStatus(errorMsg, 'error');\r\n    this.closeModal();\r\n  }\r\n}\r\n\r\n\r\n  private showScanningModal(): void {\r\n    const modal = document.getElementById('smart-find-modal');\r\n    if (!modal) return;\r\n\r\n    modal.innerHTML = `\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h3>üîç Ê≠£Âú®Êâ´ÊèèÈ°µÈù¢...</h3>\r\n          <button class=\"modal-close\" id=\"modal-close\">√ó</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"scanning-indicator\">\r\n            <div class=\"spinner\"></div>\r\n            <p style=\"color: #888;\">Ê≠£Âú®Êü•ÊâæCOPYÊåâÈíÆ...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    modal.style.display = 'flex';\r\n    \r\n    document.getElementById('modal-close')?.addEventListener('click', () => {\r\n      this.closeModal();\r\n    });\r\n  }\r\n\r\n  private showEmptyResultModal(): void {\r\n    const modal = document.getElementById('smart-find-modal');\r\n    if (!modal) return;\r\n\r\n    modal.innerHTML = `\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h3>üîç Êü•ÊâæÁªìÊûú</h3>\r\n          <button class=\"modal-close\" id=\"modal-close\">√ó</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"empty-result\">\r\n            <div class=\"empty-result-icon\">üòï</div>\r\n            <p>Êú™ÊâæÂà∞COPYÊåâÈíÆ</p>\r\n            <p style=\"font-size: 12px; color: #666; margin-top: 8px;\">\r\n              ËØ∑Á°Æ‰øùÂΩìÂâçÈ°µÈù¢ÊúâAIÂØπËØùÂõûÁ≠îÔºåÂπ∂‰∏îÊúâÂ§çÂà∂ÊåâÈíÆ\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button class=\"btn-cancel\" id=\"modal-cancel\">ÂÖ≥Èó≠</button>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    modal.style.display = 'flex';\r\n    \r\n    document.getElementById('modal-close')?.addEventListener('click', () => this.closeModal());\r\n    document.getElementById('modal-cancel')?.addEventListener('click', () => this.closeModal());\r\n  }\r\n\r\n  private showCandidatesModal(candidates: ButtonCandidate[]): void {\r\n    const modal = document.getElementById('smart-find-modal');\r\n    if (!modal) return;\r\n\r\n    modal.innerHTML = `\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h3>üîç ÊâæÂà∞ ${candidates.length} ‰∏™ÂÄôÈÄâÊåâÈíÆ</h3>\r\n          <button class=\"modal-close\" id=\"modal-close\">√ó</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p style=\"margin-bottom: 12px; font-size: 13px; color: #888;\">\r\n            ÁÇπÂáªÈÄâÊã©‰∏Ä‰∏™COPYÊåâÈíÆÔºö\r\n          </p>\r\n          ${candidates.map((c, i) => `\r\n            <div class=\"button-candidate\" data-index=\"${i}\">\r\n              <div class=\"button-info\">\r\n                <div class=\"button-label\">${this.escapeHtml(c.label)}</div>\r\n                <div class=\"button-selector\">${this.escapeHtml(c.selector)}</div>\r\n                <div class=\"button-details\">\r\n                  ${c.ariaLabel ? `aria-label: ${this.escapeHtml(c.ariaLabel)}` : ''}\r\n                  ${c.score ? ` ‚Ä¢ Áõ∏ÂÖ≥Â∫¶: ${c.score}ÂàÜ` : ''}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          `).join('')}\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button class=\"btn-cancel\" id=\"modal-cancel\">ÂèñÊ∂à</button>\r\n          <button class=\"btn-confirm\" id=\"modal-confirm\" disabled>Á°ÆÂÆö</button>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    modal.style.display = 'flex';\r\n    \r\n    document.getElementById('modal-close')?.addEventListener('click', () => this.closeModal());\r\n    document.getElementById('modal-cancel')?.addEventListener('click', () => this.closeModal());\r\n    document.getElementById('modal-confirm')?.addEventListener('click', () => this.confirmSelection());\r\n    \r\n    const candidateElements = modal.querySelectorAll('.button-candidate');\r\n    candidateElements.forEach((el) => {\r\n      el.addEventListener('click', (e) => {\r\n        const index = parseInt((e.currentTarget as HTMLElement).getAttribute('data-index') || '0');\r\n        this.selectCandidate(index, candidates);\r\n      });\r\n    });\r\n  }\r\n\r\n  private selectCandidate(index: number, candidates: ButtonCandidate[]): void {\r\n    this.selectedCandidate = candidates[index];\r\n    \r\n    const modal = document.getElementById('smart-find-modal');\r\n    if (!modal) return;\r\n    \r\n    modal.querySelectorAll('.button-candidate').forEach(el => {\r\n      el.classList.remove('selected');\r\n    });\r\n    \r\n    const selected = modal.querySelector(`[data-index=\"${index}\"]`);\r\n    selected?.classList.add('selected');\r\n    \r\n    const confirmBtn = document.getElementById('modal-confirm') as HTMLButtonElement;\r\n    if (confirmBtn) confirmBtn.disabled = false;\r\n  }\r\n\r\n  private confirmSelection(): void {\r\n    if (!this.selectedCandidate) return;\r\n    \r\n    if (this.configSelectorInput) {\r\n      this.configSelectorInput.value = this.selectedCandidate.selector;\r\n    }\r\n    \r\n    this.showStatus(`‚úÖ Â∑≤ÈÄâÊã©: ${this.selectedCandidate.selector}`, 'success');\r\n    this.closeModal();\r\n    this.selectedCandidate = null;\r\n  }\r\n\r\n  private closeModal(): void {\r\n    const modal = document.getElementById('smart-find-modal');\r\n    if (modal) {\r\n      modal.style.display = 'none';\r\n      modal.innerHTML = '';\r\n    }\r\n    this.selectedCandidate = null;\r\n  }\r\n\r\n  private addUrl(): void {\r\n    const url = this.newUrlInput?.value.trim();\r\n    if (!url) {\r\n      this.showStatus('ËØ∑ËæìÂÖ•ÁΩëÁ´ôÂüüÂêç', 'error');\r\n      return;\r\n    }\r\n\r\n    if (!/^[\\w\\-.*]+(\\.\\w{2,})?$/.test(url) && url !== 'localhost') {\r\n      this.showStatus('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂüüÂêçÊ†ºÂºè', 'error');\r\n      return;\r\n    }\r\n\r\n    if (this.currentSettings.enabledUrls.includes(url)) {\r\n      this.showStatus('ËØ•ÁΩëÁ´ôÂ∑≤Â≠òÂú®', 'error');\r\n      return;\r\n    }\r\n\r\n    this.currentSettings.enabledUrls.push(url);\r\n    this.renderUrlList();\r\n    \r\n    if (this.newUrlInput) {\r\n      this.newUrlInput.value = '';\r\n    }\r\n    \r\n    this.showStatus('‚úÖ Â∑≤Ê∑ªÂä†ÔºåËØ∑ÁÇπÂáª‰øùÂ≠òËÆæÁΩÆ', 'success');\r\n  }\r\n\r\n  private removeUrl(index: number): void {\r\n    this.currentSettings.enabledUrls.splice(index, 1);\r\n    this.renderUrlList();\r\n    this.showStatus('‚úÖ Â∑≤Âà†Èô§ÔºåËØ∑ÁÇπÂáª‰øùÂ≠òËÆæÁΩÆ', 'success');\r\n  }\r\n\r\n  private addConfig(): void {\r\n    const hostname = this.configHostnameInput?.value.trim();\r\n    const selector = this.configSelectorInput?.value.trim();\r\n    const container = this.configContainerInput?.value.trim();\r\n\r\n    if (!hostname || !selector) {\r\n      this.showStatus('ËØ∑ËæìÂÖ•ÂüüÂêçÂíåCOPYÊåâÈíÆÈÄâÊã©Âô®', 'error');\r\n      return;\r\n    }\r\n\r\n    const exists = this.currentSettings.siteConfigs.some(\r\n      config => config.hostname === hostname\r\n    );\r\n\r\n    if (exists) {\r\n      this.showStatus('ËØ•ÁΩëÁ´ôÈÖçÁΩÆÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§', 'error');\r\n      return;\r\n    }\r\n\r\n    const newConfig: SiteConfig = {\r\n      hostname,\r\n      copyButtonSelector: selector,\r\n      responseContainerSelector: container || undefined\r\n    };\r\n\r\n    this.currentSettings.siteConfigs.push(newConfig);\r\n    this.renderConfigList();\r\n\r\n    if (this.configHostnameInput) this.configHostnameInput.value = '';\r\n    if (this.configSelectorInput) this.configSelectorInput.value = '';\r\n    if (this.configContainerInput) this.configContainerInput.value = '';\r\n\r\n    this.showStatus('‚úÖ Â∑≤Ê∑ªÂä†ÈÖçÁΩÆÔºåËØ∑ÁÇπÂáª‰øùÂ≠òËÆæÁΩÆ', 'success');\r\n  }\r\n\r\n  private removeConfig(index: number): void {\r\n    this.currentSettings.siteConfigs.splice(index, 1);\r\n    this.renderConfigList();\r\n    this.showStatus('‚úÖ Â∑≤Âà†Èô§ÔºåËØ∑ÁÇπÂáª‰øùÂ≠òËÆæÁΩÆ', 'success');\r\n  }\r\n\r\n  private async saveSettings(): Promise<void> {\r\n    const settings: Settings = {\r\n      port: parseInt(this.portInput?.value || '8765'),\r\n      enabledUrls: this.currentSettings.enabledUrls,\r\n      showOnAllSites: this.showOnAllSitesCheckbox?.checked || false,\r\n      siteConfigs: this.currentSettings.siteConfigs,\r\n      promptFiles: this.currentSettings.promptFiles || []\r\n    };\r\n\r\n    if (settings.port < 1024 || settings.port > 65535) {\r\n      this.showStatus('Á´ØÂè£Âè∑ÂøÖÈ°ªÂú® 1024-65535 ‰πãÈó¥', 'error');\r\n      return;\r\n    }\r\n\r\n    await chrome.storage.sync.set(settings);\r\n    \r\n    this.showStatus('‚úÖ ËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºåËØ∑Âà∑Êñ∞ÁΩëÈ°µ‰ΩøÈÖçÁΩÆÁîüÊïà', 'success');\r\n  }\r\n\r\n  private async resetToDefaults(): Promise<void> {\r\n    if (!confirm('Á°ÆÂÆöË¶ÅÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆÂêóÔºüÊâÄÊúâËá™ÂÆö‰πâÈÖçÁΩÆÂ∞ÜË¢´Ê∏ÖÈô§„ÄÇ')) {\r\n      return;\r\n    }\r\n\r\n    this.currentSettings = {\r\n      port: 8765,\r\n      enabledUrls: [...DEFAULT_URLS],\r\n      showOnAllSites: false,\r\n      siteConfigs: [],\r\n      promptFiles: []\r\n    };\r\n\r\n    if (this.portInput) this.portInput.value = '8765';\r\n    if (this.showOnAllSitesCheckbox) this.showOnAllSitesCheckbox.checked = false;\r\n    \r\n    this.renderUrlList();\r\n    this.renderConfigList();\r\n    this.renderPromptList();\r\n    this.showStatus('‚úÖ Â∑≤ÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆÔºåËØ∑ÁÇπÂáª‰øùÂ≠ò', 'success');\r\n  }\r\n\r\n  private async exportConfig(): Promise<void> {\r\n    try {\r\n      const data = await chrome.storage.sync.get(null);\r\n      \r\n      const exportData = {\r\n        version: '1.0.0',\r\n        timestamp: new Date().toISOString(),\r\n        extension: 'AI to VSCode Bridge',\r\n        data: data\r\n      };\r\n\r\n      const json = JSON.stringify(exportData, null, 2);\r\n      const blob = new Blob([json], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      \r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `ai-vscode-bridge-config-${Date.now()}.json`;\r\n      a.click();\r\n      \r\n      URL.revokeObjectURL(url);\r\n      \r\n      this.showStatus('‚úÖ ÈÖçÁΩÆÂ∑≤ÂØºÂá∫', 'success');\r\n    } catch (error) {\r\n      console.error('ÂØºÂá∫Â§±Ë¥•:', error);\r\n      this.showStatus('‚ùå ÂØºÂá∫Â§±Ë¥•: ' + (error as Error).message, 'error');\r\n    }\r\n  }\r\n\r\n  private async handleImportFile(event: Event): Promise<void> {\r\n    const input = event.target as HTMLInputElement;\r\n    const file = input.files?.[0];\r\n    \r\n    if (!file) return;\r\n\r\n    try {\r\n      const text = await file.text();\r\n      const importData = JSON.parse(text);\r\n\r\n      if (!importData.data || !importData.version) {\r\n        this.showStatus('‚ùå Êó†ÊïàÁöÑÈÖçÁΩÆÊñá‰ª∂Ê†ºÂºè', 'error');\r\n        return;\r\n      }\r\n\r\n      if (!confirm('Á°ÆÂÆöË¶ÅÂØºÂÖ•ÈÖçÁΩÆÂêóÔºüÂΩìÂâçÈÖçÁΩÆÂ∞ÜË¢´Ë¶ÜÁõñ„ÄÇ')) {\r\n        return;\r\n      }\r\n\r\n      await chrome.storage.sync.set(importData.data);\r\n      await this.loadSettings();\r\n      \r\n      this.showStatus('‚úÖ ÈÖçÁΩÆÂ∑≤ÂØºÂÖ•ÔºåËØ∑Âà∑Êñ∞ÁΩëÈ°µ‰ΩøÈÖçÁΩÆÁîüÊïà', 'success');\r\n    } catch (error) {\r\n      console.error('ÂØºÂÖ•Â§±Ë¥•:', error);\r\n      this.showStatus('‚ùå ÂØºÂÖ•Â§±Ë¥•: ' + (error as Error).message, 'error');\r\n    } finally {\r\n      input.value = '';\r\n    }\r\n  }\r\n\r\n  private showStatus(message: string, type: 'success' | 'error'): void {\r\n    if (!this.statusDiv) return;\r\n    \r\n    this.statusDiv.textContent = message;\r\n    this.statusDiv.className = type;\r\n    this.statusDiv.style.display = 'block';\r\n    \r\n    setTimeout(() => {\r\n      if (this.statusDiv) {\r\n        this.statusDiv.style.display = 'none';\r\n      }\r\n    }, 4000);\r\n  }\r\n\r\n  private escapeHtml(text: string): string {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n  }\r\n\r\n  // ÊèêÁ§∫ËØçÁÆ°ÁêÜÁõ∏ÂÖ≥ÊñπÊ≥ï\r\n  private renderPromptList(): void {\r\n    if (!this.promptList) return;\r\n\r\n    const prompts = this.currentSettings.promptFiles || [];\r\n\r\n    if (prompts.length === 0) {\r\n      this.promptList.innerHTML = '<div class=\"empty-state\">ÊöÇÊó†ÊèêÁ§∫ËØçÈÖçÁΩÆ</div>';\r\n      return;\r\n    }\r\n\r\n    this.promptList.innerHTML = prompts\r\n      .map((prompt, index) => `\r\n        <div class=\"url-item\">\r\n          <div style=\"flex: 1;\">\r\n            <div style=\"font-weight: 500; color: #fff;\">${this.escapeHtml(prompt.name)}</div>\r\n            <div style=\"font-size: 11px; color: #888; margin-top: 2px;\">\r\n              ÂÜÖÂÆπÈïøÂ∫¶: ${prompt.path.length} Â≠óÁ¨¶\r\n            </div>\r\n          </div>\r\n          <button data-index=\"${index}\">Âà†Èô§</button>\r\n        </div>\r\n      `)\r\n      .join('');\r\n\r\n    this.promptList.querySelectorAll('button').forEach(btn => {\r\n      btn.addEventListener('click', (e) => {\r\n        const index = parseInt((e.target as HTMLElement).getAttribute('data-index') || '0');\r\n        this.removePrompt(index);\r\n      });\r\n    });\r\n  }\r\n\r\n  private async handleFileSelect(event: Event): Promise<void> {\r\n    const input = event.target as HTMLInputElement;\r\n    const file = input.files?.[0];\r\n    \r\n    if (!file) return;\r\n\r\n    try {\r\n      this.currentFileContent = await file.text();\r\n      \r\n      if (this.promptPathInput) {\r\n        this.promptPathInput.value = file.name;\r\n      }\r\n      \r\n      this.showStatus(`‚úÖ Â∑≤Âä†ËΩΩÊñá‰ª∂: ${file.name} (${this.currentFileContent.length} Â≠óÁ¨¶)`, 'success');\r\n    } catch (error) {\r\n      console.error('ËØªÂèñÊñá‰ª∂Â§±Ë¥•:', error);\r\n      this.showStatus('‚ùå ËØªÂèñÊñá‰ª∂Â§±Ë¥•', 'error');\r\n    }\r\n  }\r\n\r\n  private addPrompt(): void {\r\n    const name = this.promptNameInput?.value.trim();\r\n    \r\n    if (!name) {\r\n      this.showStatus('ËØ∑ËæìÂÖ•ÊèêÁ§∫ËØçÂêçÁß∞', 'error');\r\n      return;\r\n    }\r\n\r\n    if (!this.currentFileContent || this.currentFileContent.trim().length === 0) {\r\n      this.showStatus('ËØ∑ÂÖàÈÄâÊã©Âπ∂Âä†ËΩΩÊñá‰ª∂', 'error');\r\n      return;\r\n    }\r\n\r\n    if (!this.currentSettings.promptFiles) {\r\n      this.currentSettings.promptFiles = [];\r\n    }\r\n\r\n    const newPrompt: PromptFile = {\r\n      id: Date.now().toString(),\r\n      name,\r\n      path: this.currentFileContent, // Áõ¥Êé•Â≠òÂÇ®ÂÜÖÂÆπËÄå‰∏çÊòØË∑ØÂæÑ\r\n      enabled: true\r\n    };\r\n\r\n    this.currentSettings.promptFiles.push(newPrompt);\r\n    this.renderPromptList();\r\n\r\n    if (this.promptNameInput) this.promptNameInput.value = '';\r\n    if (this.promptPathInput) this.promptPathInput.value = '';\r\n    this.currentFileContent = '';\r\n\r\n    this.saveDraft();\r\n    this.showStatus('‚úÖ Â∑≤Ê∑ªÂä†ÊèêÁ§∫ËØçÔºåËØ∑ÁÇπÂáª‰øùÂ≠òËÆæÁΩÆ', 'success');\r\n  }\r\n\r\n  private removePrompt(index: number): void {\r\n    if (!this.currentSettings.promptFiles) return;\r\n    \r\n    this.currentSettings.promptFiles.splice(index, 1);\r\n    this.renderPromptList();\r\n    this.saveDraft();\r\n    this.showStatus('‚úÖ Â∑≤Âà†Èô§ÔºåËØ∑ÁÇπÂáª‰øùÂ≠òËÆæÁΩÆ', 'success');\r\n  }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  new PopupManager();\r\n});\r\n"],"names":["DEFAULT_URLS","PopupManager","constructor","autoSaveTimer","hasDraft","portInput","showOnAllSitesCheckbox","urlList","newUrlInput","saveButton","resetButton","addUrlButton","exportButton","importButton","importFileInput","smartFindButton","statusDiv","configList","configHostnameInput","configSelectorInput","configContainerInput","addConfigButton","promptNameInput","promptPathInput","selectFileButton","promptFileInput","addPromptButton","promptList","currentFileContent","currentSettings","port","enabledUrls","showOnAllSites","siteConfigs","promptFiles","selectedCandidate","this","initElements","loadSettings","setupEventListeners","setupAutoSave","document","getElementById","settings","chrome","storage","sync","get","draft","local","draftSettings","draftData","fiveMinutes","timestamp","Date","now","showDraftIndicator","remove","value","toString","checked","renderUrlList","renderConfigList","renderPromptList","textContent","style","background","hideDraftIndicator","addEventListener","scheduleAutoSave","clearTimeout","window","setTimeout","saveDraft","parseInt","set","length","innerHTML","map","url","index","escapeHtml","join","querySelectorAll","forEach","btn","e","target","getAttribute","removeUrl","config","hostname","copyButtonSelector","responseContainerSelector","removeConfig","saveSettings","resetToDefaults","addUrl","addConfig","exportConfig","click","smartFindCopyButtons","handleImportFile","key","ctrlKey","handleFileSelect","addPrompt","activeTab","tabs","query","active","currentWindow","id","showStatus","URL","console","error","showScanningModal","results","scripting","executeScript","tabId","func","candidates","button","text","toLowerCase","trim","ariaLabel","title","className","score","includes","querySelector","selector","ariaLabelAttr","replace","classes","split","slice","push","label","sort","a","b","result","showEmptyResultModal","showCandidatesModal","errorMsg","Error","message","closeModal","modal","display","c","i","confirmSelection","el","currentTarget","selectCandidate","classList","selected","add","confirmBtn","disabled","test","splice","container","some","newConfig","undefined","confirm","data","exportData","version","toISOString","extension","json","JSON","stringify","blob","Blob","type","createObjectURL","createElement","href","download","revokeObjectURL","event","input","file","files","importData","parse","div","prompts","prompt","name","path","removePrompt","newPrompt","enabled"],"sourceRoot":""}