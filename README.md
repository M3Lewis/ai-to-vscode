**ä¸­æ–‡** | [**English**](./README_EN.md)

# AI to VSCode Bridge

**AI to VSCode Bridge** æ˜¯ä¸€ä¸ª Chrome æ‰©å±•ï¼Œæ—¨åœ¨æ‰“é€š AI ç½‘é¡µå¯¹è¯ï¼ˆå¦‚ ChatGPT, Claude, DeepWiki ç­‰ï¼‰ä¸ VS Code ç¼–è¾‘å™¨ä¹‹é—´çš„å£å’ã€‚å®ƒå…è®¸ä½ ä¸€é”®å°†ç½‘é¡µä¸Šçš„ä»£ç å—ã€å¯¹è¯å†…å®¹å‘é€åˆ° VS Codeï¼Œç”šè‡³ç›´æ¥åˆ›å»ºæ–‡ä»¶æˆ–æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨è¡¥å…¨ä»£ç ã€‚

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### ğŸ› ï¸ æµ®åŠ¨é¢æ¿åŠŸèƒ½ (Floating Panel Features)

å¯¹åº”å³ä¸‹è§’æ§åˆ¶é¢æ¿çš„æ“ä½œæŒ‰é’®ï¼š

- **å¤åˆ¶å¹¶ä¿å­˜ (Copy & Save)** `[Primary]`
  - **åŠŸèƒ½**: ä¸€é”®æå–å½“å‰ AI å›ç­”çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶å‘é€åˆ° VS Codeã€‚
  - **ç‰¹æ€§**: è‡ªåŠ¨è¯†åˆ«ä»£ç å—è¯­è¨€ï¼Œæ™ºèƒ½ç”Ÿæˆæ–‡ä»¶åã€‚æ”¯æŒ DeepWikiã€ChatGPTã€Claude ç­‰ä¸»æµç«™ç‚¹ã€‚

- **è¯†åˆ«å¹¶åˆ›å»º (Identify & Create)**
  - **åŠŸèƒ½**: æ™ºèƒ½è§£æAI Studio Buildå›ç­”ä¸­çš„å¤šä¸ªä»£ç å—ï¼ˆå¦‚ `main.py`, `utils.py`ï¼‰ï¼Œåœ¨ VS Code ä¸­**æ‰¹é‡åˆ›å»ºå¯¹åº”æ–‡ä»¶**ã€‚
  - **åœºæ™¯**: å½“ AI ç»™å‡ºä¸€ä¸ªå®Œæ•´çš„å¤šæ–‡ä»¶é¡¹ç›®ç»“æ„æ—¶ä½¿ç”¨ã€‚

- **å±€éƒ¨æ›´æ–° (Partial Update)**
  - **åŠŸèƒ½**: å°† AI ä¿®æ”¹åçš„ä»£ç ç‰‡æ®µåº”ç”¨åˆ° VS Code ä¸­å·²å­˜åœ¨çš„æºæ–‡ä»¶ï¼Œ**åªæ›´æ–°å˜æ›´éƒ¨åˆ†**ã€‚
  - **åœºæ™¯**: ä¿®å¤ Bug æˆ–é‡æ„å‡½æ•°æ—¶ï¼Œé¿å…è¦†ç›–æ•´ä¸ªæ–‡ä»¶ã€‚

- **æˆªå›¾ä¸å¤åˆ» (Capture & Clone)**
  - **æˆªå›¾å…ƒç´  / å…¨å±æˆªå›¾**: æˆªå–å½“å‰ DOM å…ƒç´ æˆ–æ•´ä¸ªé¡µé¢ï¼Œä¿å­˜ä¸ºå›¾ç‰‡ã€‚
  - **å¤åˆ»é¡µé¢ (Clone Page)**: æŠ“å–å½“å‰é¡µé¢ DOM ç»“æ„ä¸æ ·å¼ï¼Œåœ¨ VS Code ä¸­é‡å»ºä¸º HTML/CSSï¼Œç”¨äºå¿«é€ŸåŸå‹å¤åˆ»ã€‚

- **å¯¼å‡ºå¯¹è¯ (Export Chat)**
  - **åŠŸèƒ½**: ä¸“ä¸º Google AI Studio è®¾è®¡ï¼Œä¸€é”®å°†å½“å‰å¯¹è¯å†å²å¯¼å‡ºä¸ºé«˜è´¨é‡çš„ Markdown æ–‡æ¡£ã€‚
  - **ç‰¹æ€§**:
    - è‡ªåŠ¨ä¿ç•™ä»£ç å—ã€è¡¨æ ¼ã€å›¾ç‰‡å’Œæ ¼å¼ã€‚
    - æ™ºèƒ½æ¸…æ´—ï¼šè‡ªåŠ¨ç§»é™¤æ— å…³çš„å¼•ç”¨é“¾æ¥ï¼ˆå¦‚ `[1]`ï¼‰ã€UI æŒ‰é’®æ–‡æœ¬å’Œé‡å®šå‘é“¾æ¥ã€‚
    - æ–‡ä»¶åè‡ªåŠ¨åŒ…å«æ—¶é—´æˆ³å’Œå¯¹è¯æ ‡é¢˜ã€‚

- **åŒæ­¥ Build æ–‡ä»¶**: å°†Google AI Studio App Buildé¡µé¢ä¸­AIå›å¤çš„ä»£ç æ–‡ä»¶åŒæ­¥åˆ°é¡¹ç›®ç›®å½•ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼‰ã€‚

### âš™ï¸ é«˜çº§é…ç½® (Advanced Settings)

å¯¹åº”æ‰©å±•è®¾ç½®é¡µé¢åŠŸèƒ½ï¼š

- **æ™ºèƒ½æŸ¥æ‰¾ (Smart Find)**: è‡ªåŠ¨æ£€æµ‹å½“å‰ç½‘é¡µçš„ Copy æŒ‰é’®å’Œå›ç­”å®¹å™¨ï¼Œä¸€é”®é€‚é…æœªçŸ¥ AI ç«™ç‚¹ã€‚
- **AI Studio æç¤ºè¯ç®¡ç†**: åœ¨ Google AI Studio ä¸­å¿«é€ŸåŠ è½½æœ¬åœ° Markdown æç¤ºè¯åº“ï¼Œæ”¯æŒæ–‡ä»¶é€‰æ‹©ä¸å¿«æ·åˆ‡æ¢ã€‚
- **è·¯å¾„è®°å¿†ç®¡ç†**: è‡ªåŠ¨è®°å½• VS Code é¡¹ç›®çš„æ–‡ä»¶è·¯å¾„ä¸Šä¸‹æ–‡ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¿«é€Ÿå®šä½ä¿å­˜ä½ç½®ã€‚æ”¯æŒæŒ‰é¡¹ç›®éš”ç¦»è®°å¿†ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

æœ¬æ‰©å±•é‡‡ç”¨ **Chrome Extension + Local Server** çš„æ¶æ„æ¨¡å¼ä¸ VS Code é€šä¿¡ã€‚

```plaintext
+-----------------------------------------------------+          +----------------------------------+
|                   CHROME BROWSER                    |          |            LOCAL SYSTEM          |
|                                                     |          |                                  |
|  +-------------------+      +--------------------+  |  HTTP    |  +-------------+    +---------+  |
|  |     AI Website    |      |  Extension Content |  |  POST    |  | Local Server|    | VS Code |  |
|  | (ChatGPT/Claude)  |----->|       Script       |--|--------->|  | (Port 8765) |--> | Editor  |  |
|  +-------------------+      |  (Floating Panel)  |  |          |  +-------------+    +---------+  |
|                             +--------------------+  |          |         |                |       |  |
|                                        ^            |          |         v                v       |  |
|                                        |            |          |  +-----------------------------+ |  |
|                                   +-----------+     |          |  |                             | |  |
|                                   | Site      |     |          |  |       Local File System     | |  |
|                                   | Handler   |     |          |  |                             | |  |
|                                   +-----------+     |          |  +-----------------------------+ |  |
+-----------------------------------------------------+          +----------------------------------+
```

**å·¥ä½œæµ:**
1. **è¯†åˆ« (Identify)**: `SiteHandler` æ ¹æ®å½“å‰åŸŸåï¼ˆå¦‚ deepwiki.comï¼‰è¯†åˆ«é¡µé¢ç»“æ„ï¼Œå®šä½æœ€æ–°çš„å›ç­”å†…å®¹ã€‚
2. **æå– (Extract)**: ç”¨æˆ·ç‚¹å‡»æ‚¬æµ®çª—æŒ‰é’®ï¼ŒContent Script æå–ç›®æ ‡å…ƒç´ å†…çš„æ–‡æœ¬æˆ–ä»£ç ã€‚
3. **ä¼ è¾“ (Transport)**: æ‰©å±•é€šè¿‡ HTTP è¯·æ±‚å°†æ•°æ®å‘é€åˆ° VS Code ä¾§è¿è¡Œçš„æœ¬åœ°æœåŠ¡å™¨ï¼ˆé€šå¸¸ç”± VS Code æ’ä»¶æˆ–ç‹¬ç«‹çš„ server è„šæœ¬æä¾›ï¼‰ã€‚
4. **æ‰§è¡Œ (Execute)**: VS Code æ¥æ”¶æ•°æ®å¹¶æ‰§è¡Œç›¸åº”çš„ç¼–è¾‘ã€ä¿å­˜æ“ä½œã€‚

## ğŸš€ å®‰è£…ä¸ä½¿ç”¨

### å‰ç½®è¦æ±‚
1. **Chrome æµè§ˆå™¨**
2. **VS Code**
3. **æœ¬åœ°æœåŠ¡ç«¯**: éœ€è¦è¿è¡Œä¸€ä¸ªç›‘å¬ç‰¹å®šç«¯å£ï¼ˆé»˜è®¤ 3000æˆ–å…¶ä»–é…ç½®ç«¯å£ï¼‰çš„æœ¬åœ°æœåŠ¡ï¼Œç”¨äºæ¥æ”¶æ‰©å±•çš„è¯·æ±‚ã€‚

### å®‰è£…å¹¶è¿è¡Œ

#### 1. Chrome æ‰©å±• (Chrome Extension)
1. è¿›å…¥ `chrome-ext` ç›®å½•ï¼š
   ```bash
   cd chrome-ext
   ```
2. å®‰è£…ä¾èµ–å¹¶æ„å»ºï¼š
   ```bash
   npm install
   npm run build
   ```
3. åœ¨ Chrome ä¸­åŠ è½½ï¼š
   - æ‰“å¼€ `chrome://extensions/`
   - å¼€å¯å³ä¸Šè§’çš„ **"å¼€å‘è€…æ¨¡å¼"**
   - ç‚¹å‡» **"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"**
   - é€‰æ‹© `chrome-ext/dist` ç›®å½•

#### 2. VS Code æ‰©å±• (VS Code Extension)
1. è¿›å…¥ `vscode-ext` ç›®å½•ï¼š
   ```bash
   cd vscode-ext
   ```
2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   npm install
   ```
3. è¿è¡Œæ‰©å±•ï¼š
   - åœ¨ VS Code ä¸­æ‰“å¼€ `vscode-ext` æ–‡ä»¶å¤¹
   - æŒ‰ `F5` å¯åŠ¨è°ƒè¯•å®ä¾‹

## ğŸ“¦ æ„å»ºä¸æ‰“åŒ… (Build & Packaging)

ç”¨äºç”Ÿæˆå‘å¸ƒåˆ° GitHub Release çš„äº§ç‰©ã€‚

### 1. VS Code æ‰©å±• (`.vsix`)
åœ¨ `vscode-ext` ç›®å½•ä¸‹è¿è¡Œï¼š
```bash
npx vsce package
```
æ‰§è¡ŒæˆåŠŸåå°†ç”Ÿæˆ `.vsix` æ–‡ä»¶ã€‚

### 2. Chrome æ‰©å±• (`.zip`)
1. åœ¨ `chrome-ext` ç›®å½•ä¸‹è¿è¡Œï¼š
   ```bash
   npm run build
   ```
2. å°†ç”Ÿæˆçš„ `dist` æ–‡ä»¶å¤¹å‹ç¼©ä¸º `.zip` æ ¼å¼å³å¯ã€‚ç”¨æˆ·å¯é€šè¿‡åŠ è½½æ­¤å‹ç¼©åŒ…æˆ–å…¶ä¸­çš„è§£å‹æ–‡ä»¶å¤¹æ¥ä½¿ç”¨ã€‚

### 3. ä¸€é”®å‘å¸ƒè„šæœ¬ (Automated Release)
å¦‚æœä½ æ˜¯åœ¨ PowerShell ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘ä»¬æä¾›çš„è‡ªåŠ¨åŒ–è„šæœ¬æ¥å®Œæˆä»¥ä¸Šæ‰€æœ‰æ­¥éª¤ï¼š

```powershell
.\scripts\release.ps1
```
è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹å½“å‰ç‰ˆæœ¬å·ã€‚
2. æ„å»ºå¹¶æ‰“åŒ… Chrome æ‰©å±•ä¸º `.zip`ã€‚
3. æ‰“åŒ… VS Code æ‰©å±•ä¸º `.vsix`ã€‚
4. (å¯é€‰) æç¤ºä½ æ˜¯å¦ä½¿ç”¨ `gh` CLI ç›´æ¥å‘å¸ƒåˆ° GitHub Releaseã€‚

---

## ğŸ–Œï¸ ç•Œé¢ä¸äº¤äº’

### æµ®åŠ¨é¢æ¿ (Floating Panel)

é¡µé¢å³ä¸‹è§’çš„æ“ä½œé¢æ¿ï¼ˆå‚è€ƒ Image 1ï¼‰ï¼š

```plaintext
+-------------------------------------------------------+
|  âš¡ VS Code Bridge               [â—] æœªè¿æ¥   [â–¾] [âœ•] |
+-------------------------------------------------------+
|  æ–‡ä»¶åé¢„è§ˆ...                                        |
+-------------------------------------------------------+
|  ä»£ç æ“ä½œ                                             |
|  +-------------------------------------------------+  |
|  |  å¤åˆ¶å¹¶ä¿å­˜ (Primary)                           |  |
|  +-------------------------------------------------+  |
|  +--------------+    +--------------+                 |
|  |  è¯†åˆ«å¹¶åˆ›å»º  |    |   å±€éƒ¨æ›´æ–°   |                 |
|  +--------------+    +--------------+                 |
|                                                       |
|  å…ƒç´ å·¥å…·                                             |
|  [ğŸ“· æˆªå›¾å…ƒç´ ]  [ğŸ“‹ å¤åˆ¶å…ƒç´ ]  [ğŸ“„ å¤åˆ¶(å«å­)]        |
|  [ğŸ–¥ï¸ å…¨å±æˆªå›¾]  [ğŸ”„ å¤åˆ»é¡µé¢]                         |
|                                                       |
|  AI Studio                                            |
|  [ğŸ“¥ åŒæ­¥æ–‡ä»¶]  [ğŸ“ å¯¼å‡ºå¯¹è¯]                         |
|                                                       |
|  æç¤ºè¯                                        [â–¾]    |
|  [ æç¤ºè¯ 1 ]  [ æç¤ºè¯ 2 ] ...                       |
+-------------------------------------------------------+
```

### è®¾ç½®é¢æ¿ (Settings Popup)

ç‚¹å‡»æµè§ˆå™¨æ‰©å±•å›¾æ ‡æ‰“å¼€é…ç½®é¡µï¼ˆå‚è€ƒ Image 2ï¼‰ï¼š

```plaintext
+-------------------------------------------------------+
|  âš™ï¸ AI to VSCode Bridge                               |
+-------------------------------------------------------+
|  WebSocketç«¯å£: [ 8765                 ]              |
|                                                       |
|  [x] åœ¨æ‰€æœ‰ç½‘ç«™æ˜¾ç¤ºæ‚¬æµ®çª—                             |
|                                                       |
|  å¯ç”¨çš„ç½‘ç«™:                                          |
|  [ chat.openai.com             [åˆ é™¤] ]               |
|  [ claude.ai                   [åˆ é™¤] ]               |
|  [ ...                         [åˆ é™¤] ]               |
|                                                       |
|  ç½‘ç«™é€‰æ‹©å™¨é…ç½® (é«˜çº§):                               |
|  [ ğŸª„ æ™ºèƒ½æŸ¥æ‰¾å½“å‰é¡µé¢çš„COPYæŒ‰é’®        ]             |
|                                                       |
|  AI Studio æç¤ºè¯ç®¡ç† (System Instructions):          |
|  [ æœªé€‰æ‹©æ–‡ä»¶             ] [ğŸ“é€‰æ‹©] [æ·»åŠ æç¤ºè¯]     |
|                                                       |
|  ğŸ“‚ æ–‡ä»¶ä¿å­˜è·¯å¾„:                                     |
|  [ docs/ai-responses                  ]               |
|                                                       |
|  ğŸ“‚ è·¯å¾„è®°å¿†ç®¡ç†:                                     |
|  å½“å‰é¡¹ç›®: VscodeProjects                             |
|  + æ‰‹åŠ¨æ·»åŠ /ä¿®æ”¹è®°å¿†                                  |
|  | æ–‡ä»¶å (å¦‚: SKILL.md)                              |
|  | æ‰€åœ¨ç›®å½• (å¦‚: docs/project)                        |
|  | [ æ·»åŠ è®°å¿† ]                                       |
|  +----------------------------------------------------+
|  å·²è®°ä½çš„è·¯å¾„:                           [ æ¸…ç©ºå…¨éƒ¨ ] |
|  [ src/utils.ts (src/core)       [âœ] [Ã—] ]            |
|                                                       |
|  [ ğŸ’¾ ä¿å­˜è®¾ç½® ]  [ â†º æ¢å¤é»˜è®¤ ]  [ğŸ“¥å¯¼å‡º] [ğŸ“¤å¯¼å…¥]   |
+-------------------------------------------------------+
```

### ä½¿ç”¨æµç¨‹ (Usage Workflow)

```plaintext
1. AI ç”Ÿæˆå†…å®¹           2. ç‚¹å‡»æ‚¬æµ®çª—æ“ä½œ          3. VS Code æ¥æ”¶å¹¶å¤„ç†
+------------------+    +-------------------+    +----------------------+
| AI Chat Interface|    | Floating Panel    |    | VS Code Editor       |
|                  |    |                   |    |                      |
| > Here is the    |    | +---------------+ |    | [File Created]       |
|   code:          |    | | [ å¤åˆ¶å¹¶ä¿å­˜] | |    |                      |
|                  |    | +-------+-------+ |    |  def hello():        |
|  def hello():    |--->|         |         |--->|      print("Hi")     |
|      print("Hi") |    |         |         |    |                      |
|                  |    |         v         |    |                      |
|                  |    |   Extracts Text   |    |                      |
+------------------+    +-------------------+    +----------------------+
```

## ğŸ“– å¼€å‘æŒ‡å— (OpenSpec)

æœ¬é¡¹ç›®ä½¿ç”¨ **OpenSpec** è§„èŒƒç®¡ç†å˜æ›´ä¸å¼€å‘æµç¨‹ã€‚

### å¸¸ç”¨å·¥ä½œæµ

- **å¼€å§‹æ–°åŠŸèƒ½**:
  ```bash
  /opsx-new "add-feature-name"
  ```
- **å¿«é€Ÿç”Ÿæˆå·¥ä»¶ (Proposal -> Tasks)**:
  ```bash
  /opsx-ff "change-name"
  ```
- **å¼€å§‹å®ç°**:
  ```bash
  /opsx-apply "change-name"
  ```
- **å®Œæˆå¹¶å½’æ¡£**:
  ```bash
  /opsx-archive "change-name"
  ```

### ç›®å½•ç»“æ„

- `chrome-ext/`: Chrome æ‰©å±•æºä»£ç  (React/TypeScript)
- `vscode-ext/`: VS Code æ‰©å±•æºä»£ç  (TypeScript)
